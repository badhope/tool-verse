<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToolVerse Pro | æç®€å·¥å…·å®‡å®™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- QRCode.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- Marked.js for Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Three.js for 3D effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'gradient-x': 'gradient-x 15s ease infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'typing': 'typing 3.5s steps(40, end), blink-caret .75s step-end infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'bounce-in': 'bounceIn 0.6s ease-out',
                    },
                    keyframes: {
                        'gradient-x': {
                            '0%, 100%': { 'background-position': '0% 50%' },
                            '50%': { 'background-position': '100% 50%' },
                        },
                        'float': {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        'typing': {
                            'from': { width: '0' },
                            'to': { width: '100%' },
                        },
                        'blink-caret': {
                            'from, to': { borderColor: 'transparent' },
                            '50%': { borderColor': 'currentColor' },
                        },
                        'glow': {
                            'from': { 'box-shadow': '0 0 20px rgba(99, 102, 241, 0.5)' },
                            'to': { 'box-shadow': '0 0 30px rgba(99, 102, 241, 0.8), 0 0 60px rgba(99, 102, 241, 0.4)' },
                        },
                        'slideUp': {
                            'from': { transform: 'translateY(20px)', opacity: '0' },
                            'to': { transform: 'translateY(0)', opacity: '1' },
                        },
                        'bounceIn': {
                            '0%': { transform: 'scale(0.3)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)' },
                            '70%': { transform: 'scale(0.9)' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .dark .glass {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tool-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .tool-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(99, 102, 241, 0.2);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .dark .gradient-text {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            animation: gradient-x 15s ease infinite;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.5;
            animation: float 20s infinite;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .typing-effect::after {
            content: '|';
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* 3D Canvas */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }
        
        /* Tool Category Icons */
        .category-icon {
            font-size: 2rem;
            transition: transform 0.3s ease;
        }
        
        .tool-card:hover .category-icon {
            transform: rotate(10deg) scale(1.2);
        }
        
        /* Loading Spinner */
        .spinner {
            border: 3px solid rgba(99, 102, 241, 0.1);
            border-top-color: #6366f1;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Image Filters */
        .filter-preview {
            transition: filter 0.3s ease;
        }
        
        /* Code Highlight */
        .code-block {
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
        }
        
        /* Notification Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 1rem 2rem;
            border-radius: 12px;
            background: #10b981;
            color: white;
            font-weight: 600;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 9999;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Progress Bar Animation */
        .progress-bar {
            height: 4px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #d946ef);
            background-size: 200% 100%;
            animation: gradient-x 2s linear infinite;
        }
        
        /* PWA Install Banner */
        .pwa-banner {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 1rem;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-slate-900 text-gray-800 dark:text-gray-200 transition-colors duration-300 min-h-screen overflow-x-hidden">
    <!-- 3D Background Canvas -->
    <canvas id="bg-canvas"></canvas>
    
    <!-- Dynamic Background Particles -->
    <div id="particles" class="fixed inset-0 pointer-events-none overflow-hidden z-0"></div>
    
    <!-- Navigation Bar -->
    <nav class="fixed top-0 w-full z-50 glass transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2 cursor-pointer" onclick="showHome()">
                    <i class="fas fa-cube text-2xl text-indigo-600 dark:text-pink-400 animate-pulse-slow"></i>
                    <span class="text-xl font-bold gradient-text">ToolVerse Pro</span>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <button onclick="showHome()" class="nav-item hover:text-indigo-600 dark:hover:text-pink-400 transition-colors">
                        <i class="fas fa-home mr-1"></i>é¦–é¡µ
                    </button>
                    <button onclick="showCategory('all')" class="nav-item hover:text-indigo-600 dark:hover:text-pink-400 transition-colors">
                        <i class="fas fa-th-large mr-1"></i>å…¨éƒ¨å·¥å…·
                    </button>
                    <button onclick="showCategory('favorites')" class="nav-item hover:text-indigo-600 dark:hover:text-pink-400 transition-colors">
                        <i class="fas fa-star mr-1"></i>æ”¶è—å¤¹
                    </button>
                    <button onclick="toggleTheme()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
                    </button>
                </div>
                
                <button onclick="toggleMobileMenu()" class="md:hidden p-2">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden glass border-t dark:border-gray-700">
            <div class="px-4 pt-2 pb-4 space-y-2">
                <button onclick="showHome()" class="block w-full text-left py-2 hover:text-indigo-600">é¦–é¡µ</button>
                <button onclick="showCategory('all')" class="block w-full text-left py-2 hover:text-indigo-600">å…¨éƒ¨å·¥å…·</button>
                <button onclick="showCategory('favorites')" class="block w-full text-left py-2 hover:text-indigo-600">æ”¶è—å¤¹</button>
                <button onclick="toggleTheme()" class="block w-full text-left py-2">åˆ‡æ¢ä¸»é¢˜</button>
            </div>
        </div>
    </nav>
    
    <!-- Search Bar Floating -->
    <div class="fixed top-20 left-1/2 transform -translate-x-1/2 z-40 w-11/12 max-w-2xl">
        <div class="relative group">
            <input type="text" id="global-search" placeholder="æœç´¢å·¥å…·... (è¯•è¯•è¾“å…¥ 'AI' æˆ– 'å›¾ç‰‡')" 
                class="w-full px-6 py-3 rounded-full glass shadow-lg border-2 border-transparent focus:border-indigo-500 dark:focus:border-pink-500 outline-none transition-all text-gray-700 dark:text-gray-200 placeholder-gray-400"
                oninput="handleSearch(this.value)">
            <i class="fas fa-search absolute right-5 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500"></i>
        </div>
        <!-- Search Results Dropdown -->
        <div id="search-results" class="hidden mt-2 glass rounded-2xl shadow-xl max-h-60 overflow-y-auto"></div>
    </div>
    
    <!-- Main Content -->
    <main class="pt-32 pb-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto relative z-10">
        
        <!-- Home View -->
        <div id="home-view" class="fade-in">
            <!-- Hero Section -->
            <div class="text-center mb-16">
                <h1 class="text-5xl md:text-7xl font-bold mb-6 gradient-text">
                    å·¥å…·å®‡å®™ Pro
                </h1>
                <p class="text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-2xl mx-auto">
                    <span id="typing-text" class="typing-effect"></span>
                </p>
                
                <!-- Real-time Time Display -->
                <div class="inline-flex items-center space-x-4 glass px-6 py-3 rounded-full shadow-lg mb-8">
                    <i class="fas fa-clock text-indigo-600 dark:text-pink-400"></i>
                    <span id="hero-time" class="text-2xl font-mono font-bold"></span>
                    <span id="hero-date" class="text-sm text-gray-500 dark:text-gray-400"></span>
                </div>
                
                <!-- Statistics -->
                <div class="flex justify-center flex-wrap gap-8 text-sm text-gray-500 dark:text-gray-400 mb-12">
                    <div class="flex items-center">
                        <i class="fas fa-eye mr-2"></i>
                        <span id="visitor-count">åŠ è½½ä¸­...</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-tools mr-2"></i>
                        <span>50+ å·¥å…·</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-bolt mr-2"></i>
                        <span>çº¯å‰ç«¯è¿è¡Œ</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-lock mr-2"></i>
                        <span>æ— æ•°æ®æ”¶é›†</span>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="flex justify-center gap-4 flex-wrap mb-12">
                    <button onclick="loadTool('ai-chat')" class="px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-full hover:scale-105 transition-transform shadow-lg animate-glow">
                        <i class="fas fa-robot mr-2"></i>AI åŠ©æ‰‹
                    </button>
                    <button onclick="loadTool('image-editor')" class="px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-full hover:scale-105 transition-transform shadow-lg">
                        <i class="fas fa-magic mr-2"></i>å›¾ç‰‡ç¼–è¾‘
                    </button>
                    <button onclick="loadTool('code-playground')" class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-full hover:scale-105 transition-transform shadow-lg">
                        <i class="fas fa-code mr-2"></i>ä»£ç æ²™ç›’
                    </button>
                </div>
            </div>
            
            <!-- Featured Tools -->
            <div class="mb-12">
                <h2 class="text-2xl font-bold mb-6 flex items-center">
                    <i class="fas fa-fire text-orange-500 mr-2"></i>çƒ­é—¨å·¥å…·
                </h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div onclick="loadTool('ai-chat')" class="glass rounded-xl p-4 cursor-pointer hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700">
                        <div class="text-3xl mb-2">ğŸ¤–</div>
                        <h3 class="font-bold">AI å¯¹è¯</h3>
                        <p class="text-xs text-gray-500">æ™ºèƒ½é—®ç­”åŠ©æ‰‹</p>
                    </div>
                    <div onclick="loadTool('image-editor')" class="glass rounded-xl p-4 cursor-pointer hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700">
                        <div class="text-3xl mb-2">ğŸ¨</div>
                        <h3 class="font-bold">å›¾ç‰‡ç¼–è¾‘</h3>
                        <p class="text-xs text-gray-500">æ»¤é•œã€è£å‰ªã€æ°´å°</p>
                    </div>
                    <div onclick="loadTool('qrcode')" class="glass rounded-xl p-4 cursor-pointer hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700">
                        <div class="text-3xl mb-2">ğŸ“±</div>
                        <h3 class="font-bold">äºŒç»´ç ç”Ÿæˆ</h3>
                        <p class="text-xs text-gray-500">è‡ªå®šä¹‰æ ·å¼</p>
                    </div>
                    <div onclick="loadTool('markdown')" class="glass rounded-xl p-4 cursor-pointer hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700">
                        <div class="text-3xl mb-2">ğŸ“</div>
                        <h3 class="font-bold">Markdown</h3>
                        <p class="text-xs text-gray-500">å®æ—¶é¢„è§ˆ</p>
                    </div>
                </div>
            </div>
            
            <!-- Category Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                <div onclick="showCategory('ai')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center mb-4 category-icon">
                        ğŸ¤–
                    </div>
                    <h3 class="text-xl font-bold mb-2">AI æ™ºèƒ½</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">AIå¯¹è¯ã€æ–‡æœ¬ç”Ÿæˆã€ä»£ç åŠ©æ‰‹ã€å›¾ç‰‡è¯†åˆ«</p>
                    <div class="mt-4 flex items-center text-indigo-600 dark:text-pink-400 text-sm">
                        <span>8 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <div onclick="showCategory('image')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-pink-500/20 to-rose-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-pink-100 dark:bg-pink-900 flex items-center justify-center mb-4 category-icon">
                        ğŸ¨
                    </div>
                    <h3 class="text-xl font-bold mb-2">å›¾ç‰‡å·¥å…·</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">å›¾ç‰‡ç¼–è¾‘ã€å‹ç¼©ã€æ ¼å¼è½¬æ¢ã€æ»¤é•œã€æ°´å°</p>
                    <div class="mt-4 flex items-center text-pink-600 dark:text-pink-400 text-sm">
                        <span>10 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <div onclick="showCategory('text')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center mb-4 category-icon">
                        ğŸ“
                    </div>
                    <h3 class="text-xl font-bold mb-2">æ–‡æœ¬å·¥å…·</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">Markdownã€äºŒç»´ç ã€å­—æ•°ç»Ÿè®¡ã€ç¼–ç è½¬æ¢</p>
                    <div class="mt-4 flex items-center text-green-600 dark:text-green-400 text-sm">
                        <span>12 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <div onclick="showCategory('dev')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/20 to-violet-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center mb-4 category-icon">
                        ğŸ’»
                    </div>
                    <h3 class="text-xl font-bold mb-2">å¼€å‘è¾…åŠ©</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">JSONæ ¼å¼åŒ–ã€ä»£ç æ²™ç›’ã€APIæµ‹è¯•ã€æ­£åˆ™</p>
                    <div class="mt-4 flex items-center text-purple-600 dark:text-purple-400 text-sm">
                        <span>15 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <div onclick="showCategory('time')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center mb-4 category-icon">
                        â°
                    </div>
                    <h3 class="text-xl font-bold mb-2">æ—¶é—´æ—¥æœŸ</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">ä¸–ç•Œæ—¶é’Ÿã€å€’è®¡æ—¶ã€å†œå†ã€ç§’è¡¨</p>
                    <div class="mt-4 flex items-center text-blue-600 dark:text-blue-400 text-sm">
                        <span>6 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <div onclick="showCategory('life')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-yellow-500/20 to-orange-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center mb-4 category-icon">
                        ğŸŒŸ
                    </div>
                    <h3 class="text-xl font-bold mb-2">ç”Ÿæ´»å®ç”¨</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">å¤©æ°”ã€æ±‡ç‡ã€BMIã€è®°è´¦æœ¬</p>
                    <div class="mt-4 flex items-center text-yellow-600 dark:text-yellow-400 text-sm">
                        <span>8 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <div onclick="showCategory('media')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-red-500/20 to-pink-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center mb-4 category-icon">
                        ğŸ¬
                    </div>
                    <h3 class="text-xl font-bold mb-2">å¤šåª’ä½“</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">å½•éŸ³æœºã€è§†é¢‘å‰ªè¾‘ã€éŸ³é¢‘è½¬æ¢</p>
                    <div class="mt-4 flex items-center text-red-600 dark:text-red-400 text-sm">
                        <span>5 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <div onclick="showCategory('game')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-amber-500/20 to-yellow-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-amber-100 dark:bg-amber-900 flex items-center justify-center mb-4 category-icon">
                        ğŸ®
                    </div>
                    <h3 class="text-xl font-bold mb-2">ä¼‘é—²å¨±ä¹</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">ä¿„ç½—æ–¯æ–¹å—ã€æŠ½ç­¾ã€å£çº¸</p>
                    <div class="mt-4 flex items-center text-amber-600 dark:text-amber-400 text-sm">
                        <span>6 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
                
                <div onclick="showCategory('data')" class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-teal-500/20 to-cyan-500/20 rounded-full -mr-16 -mt-16"></div>
                    <div class="w-14 h-14 rounded-full bg-teal-100 dark:bg-teal-900 flex items-center justify-center mb-4 category-icon">
                        ğŸ“Š
                    </div>
                    <h3 class="text-xl font-bold mb-2">æ•°æ®ä¿¡æ¯</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm">å®æ—¶çƒ­æœã€åŠ å¯†è´§å¸ã€è®¾å¤‡ä¿¡æ¯</p>
                    <div class="mt-4 flex items-center text-teal-600 dark:text-teal-400 text-sm">
                        <span>7 ä¸ªå·¥å…·</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </div>
            </div>
            
            <!-- Random Quote -->
            <div class="glass rounded-2xl p-8 text-center max-w-3xl mx-auto border border-gray-200 dark:border-gray-700 mb-12">
                <i class="fas fa-quote-left text-3xl text-gray-300 dark:text-gray-600 mb-4"></i>
                <p id="random-quote" class="text-lg italic mb-4 text-gray-700 dark:text-gray-300"></p>
                <p id="quote-author" class="text-sm text-gray-500"></p>
                <button onclick="refreshQuote()" class="mt-4 px-4 py-2 rounded-full bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 hover:scale-105 transition-transform">
                    <i class="fas fa-sync-alt mr-1"></i>æ¢ä¸€å¥
                </button>
            </div>
            
            <!-- Trending Section -->
            <div class="mb-12">
                <h2 class="text-2xl font-bold mb-6 flex items-center">
                    <i class="fas fa-chart-line text-blue-500 mr-2"></i>å®æ—¶çƒ­æœ
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-3 flex items-center text-red-500"><i class="fab fa-weibo mr-2"></i>å¾®åšçƒ­æœ</h3>
                        <div id="weibo-mini" class="space-y-2 text-sm"></div>
                    </div>
                    <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-3 flex items-center text-blue-500"><i class="fab fa-zhihu mr-2"></i>çŸ¥ä¹çƒ­æ¦œ</h3>
                        <div id="zhihu-mini" class="space-y-2 text-sm"></div>
                    </div>
                    <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-3 flex items-center text-green-500"><i class="fas fa-fire mr-2"></i>æŠ–éŸ³çƒ­ç‚¹</h3>
                        <div id="douyin-mini" class="space-y-2 text-sm"></div>
                    </div>
                </div>
            </div>
            
            <!-- API Status -->
            <div class="glass rounded-xl p-6 border border-gray-200 dark:border-gray-700">
                <h3 class="font-bold mb-4 flex items-center">
                    <i class="fas fa-server text-indigo-500 mr-2"></i>API çŠ¶æ€ç›‘æ§
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                    <div class="flex items-center justify-between">
                        <span>å¤©æ°” API</span>
                        <span class="px-2 py-1 rounded-full bg-green-100 text-green-600 text-xs">åœ¨çº¿</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span>æ±‡ç‡ API</span>
                        <span class="px-2 py-1 rounded-full bg-green-100 text-green-600 text-xs">åœ¨çº¿</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span>åŠ å¯†è´§å¸ API</span>
                        <span class="px-2 py-1 rounded-full bg-green-100 text-green-600 text-xs">åœ¨çº¿</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span>çƒ­æœ API</span>
                        <span class="px-2 py-1 rounded-full bg-green-100 text-green-600 text-xs">åœ¨çº¿</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tool Detail View -->
        <div id="tool-view" class="hidden fade-in">
            <button onclick="goBack()" class="mb-6 flex items-center text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-pink-400 transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>è¿”å›
            </button>
            <div id="tool-content"></div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="glass border-t border-gray-200 dark:border-gray-800 mt-20 py-8 relative z-10">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <div>
                    <h3 class="font-bold mb-4 gradient-text">ToolVerse Pro</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">æç®€å·¥å…·å®‡å®™ï¼Œ50+å®ç”¨å·¥å…·ï¼Œçº¯å‰ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯ï¼Œæ°¸ä¹…å…è´¹ã€‚</p>
                </div>
                <div>
                    <h3 class="font-bold mb-4">å¿«é€Ÿé“¾æ¥</h3>
                    <div class="grid grid-cols-2 gap-2 text-sm">
                        <a href="#" onclick="loadTool('ai-chat')" class="hover:text-indigo-600">AI åŠ©æ‰‹</a>
                        <a href="#" onclick="loadTool('image-editor')" class="hover:text-indigo-600">å›¾ç‰‡ç¼–è¾‘</a>
                        <a href="#" onclick="loadTool('qrcode')" class="hover:text-indigo-600">äºŒç»´ç ç”Ÿæˆ</a>
                        <a href="#" onclick="loadTool('markdown')" class="hover:text-indigo-600">Markdown</a>
                    </div>
                </div>
                <div>
                    <h3 class="font-bold mb-4">è”ç³»æˆ‘ä»¬</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-indigo-600"><i class="fab fa-github text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-indigo-600"><i class="fab fa-twitter text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-indigo-600"><i class="fab fa-discord text-xl"></i></a>
                    </div>
                </div>
            </div>
            <div class="text-center text-gray-500 dark:text-gray-400 text-sm pt-4 border-t dark:border-gray-700">
                <p class="mb-2">Made with <i class="fas fa-heart text-red-500 mx-1"></i> by ToolVerse Team</p>
                <p>çº¯å‰ç«¯å®ç° | æ— éœ€åç«¯ | æ°¸ä¹…å…è´¹ | å¼€æºé¡¹ç›®</p>
            </div>
        </div>
    </footer>
    
    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>
    
    <!-- PWA Install Prompt -->
    <div id="pwa-prompt" class="hidden fixed bottom-20 left-4 right-4 md:left-auto md:right-4 md:w-80 pwa-banner z-50">
        <div class="flex justify-between items-start">
            <div>
                <h3 class="font-bold">å®‰è£…åº”ç”¨</h3>
                <p class="text-sm opacity-90">æ·»åŠ åˆ°ä¸»å±å¹•ï¼Œè·å¾—æ›´å¥½ä½“éªŒ</p>
            </div>
            <button onclick="hidePWAPrompt()" class="text-white/70 hover:text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <button onclick="installPWA()" class="mt-3 w-full py-2 bg-white text-indigo-600 rounded-lg font-bold hover:bg-gray-100 transition-colors">
            ç«‹å³å®‰è£…
        </button>
    </div>

    <script>
        // ==================== Data & Configuration ====================
        const tools = {
            ai: [
                { id: 'ai-chat', name: 'AI å¯¹è¯åŠ©æ‰‹', icon: 'ğŸ¤–', desc: 'æ™ºèƒ½é—®ç­”ï¼Œæ”¯æŒå¤šè½®å¯¹è¯', badge: 'HOT' },
                { id: 'ai-image', name: 'AI å›¾ç‰‡è¯†åˆ«', icon: 'ğŸ‘ï¸', desc: 'å›¾ç‰‡å†…å®¹è¯†åˆ«ä¸åˆ†æ' },
                { id: 'ai-text', name: 'AI æ–‡æœ¬ç”Ÿæˆ', icon: 'âœï¸', desc: 'æ–‡ç« ã€æ–‡æ¡ˆã€ä»£ç ç”Ÿæˆ' },
                { id: 'ai-translate', name: 'AI ç¿»è¯‘', icon: 'ğŸŒ', desc: 'å¤šè¯­è¨€æ™ºèƒ½ç¿»è¯‘' },
                { id: 'ai-code', name: 'AI ä»£ç åŠ©æ‰‹', icon: 'ğŸ’»', desc: 'ä»£ç è§£é‡Šã€ç”Ÿæˆã€ä¼˜åŒ–' },
                { id: 'ai-summarize', name: 'AI æ‘˜è¦', icon: 'ğŸ“„', desc: 'é•¿æ–‡æœ¬æ™ºèƒ½æ‘˜è¦' },
                { id: 'ai-sentiment', name: 'æƒ…æ„Ÿåˆ†æ', icon: 'ğŸ˜Š', desc: 'æ–‡æœ¬æƒ…æ„Ÿå€¾å‘åˆ†æ' },
                { id: 'ai-ocr', name: 'OCR æ–‡å­—è¯†åˆ«', icon: 'ğŸ“–', desc: 'å›¾ç‰‡æ–‡å­—æå–' }
            ],
            image: [
                { id: 'image-editor', name: 'å›¾ç‰‡ç¼–è¾‘å™¨', icon: 'ğŸ¨', desc: 'è£å‰ªã€æ»¤é•œã€è°ƒæ•´å‚æ•°', badge: 'NEW' },
                { id: 'image-compress', name: 'å›¾ç‰‡å‹ç¼©', icon: 'ğŸ“¦', desc: 'æ™ºèƒ½å‹ç¼©ï¼Œä¿æŒè´¨é‡' },
                { id: 'image-convert', name: 'æ ¼å¼è½¬æ¢', icon: 'ğŸ”„', desc: 'PNG/JPG/WebP äº’è½¬' },
                { id: 'image-watermark', name: 'æ·»åŠ æ°´å°', icon: 'ğŸ’§', desc: 'æ–‡å­—/å›¾ç‰‡æ°´å°' },
                { id: 'image-crop', name: 'æ™ºèƒ½è£å‰ª', icon: 'âœ‚ï¸', desc: 'æŒ‰æ¯”ä¾‹/è‡ªç”±è£å‰ª' },
                { id: 'image-filter', name: 'æ»¤é•œæ•ˆæœ', icon: 'ğŸŒˆ', desc: 'å¤šç§æ»¤é•œé¢„è®¾' },
                { id: 'image-resize', name: 'è°ƒæ•´å°ºå¯¸', icon: 'ğŸ“', desc: 'æ‰¹é‡è°ƒæ•´å›¾ç‰‡å¤§å°' },
                { id: 'image-collage', name: 'å›¾ç‰‡æ‹¼æ¥', icon: 'ğŸ–¼ï¸', desc: 'å¤šå›¾æ‹¼æ¥æˆä¸€å¼ ' },
                { id: 'image-to-base64', name: 'å›¾ç‰‡è½¬Base64', icon: 'ğŸ”¤', desc: 'å›¾ç‰‡ç¼–ç è½¬æ¢' },
                { id: 'screenshot', name: 'ç½‘é¡µæˆªå›¾', icon: 'ğŸ“¸', desc: 'ç½‘é¡µé•¿æˆªå›¾' }
            ],
            text: [
                { id: 'markdown', name: 'Markdown ç¼–è¾‘å™¨', icon: 'ğŸ“', desc: 'å®æ—¶é¢„è§ˆï¼Œå¯¼å‡ºHTML/PDF', badge: 'HOT' },
                { id: 'qrcode', name: 'äºŒç»´ç ç”Ÿæˆ', icon: 'ğŸ“±', desc: 'è‡ªå®šä¹‰æ ·å¼ï¼Œæ”¯æŒä¸‹è½½' },
                { id: 'text-stats', name: 'æ–‡æœ¬ç»Ÿè®¡', icon: 'ğŸ“Š', desc: 'å­—æ•°ã€å­—ç¬¦ã€è¯é¢‘ç»Ÿè®¡' },
                { id: 'base64', name: 'Base64 è½¬æ¢', icon: 'ğŸ”', desc: 'ç¼–ç è§£ç ï¼Œæ”¯æŒå›¾ç‰‡' },
                { id: 'password', name: 'å¯†ç ç”Ÿæˆå™¨', icon: 'ğŸ”‘', desc: 'å¼ºå¯†ç ç”Ÿæˆï¼Œè‡ªå®šä¹‰è§„åˆ™' },
                { id: 'pinyin', name: 'æ±‰å­—è½¬æ‹¼éŸ³', icon: 'ğŸˆ¶', desc: 'å¸¦å£°è°ƒï¼Œæ”¯æŒå¤šéŸ³å­—' },
                { id: 'diff', name: 'æ–‡æœ¬å¯¹æ¯”', icon: 'âš–ï¸', desc: 'å·®å¼‚å¯¹æ¯”ï¼Œé«˜äº®æ˜¾ç¤º' },
                { id: 'text-sort', name: 'æ–‡æœ¬æ’åº', icon: 'ğŸ”¢', desc: 'è¡Œæ’åºã€å»é‡ã€ç­›é€‰' },
                { id: 'case-convert', name: 'å¤§å°å†™è½¬æ¢', icon: 'ğŸ”¤', desc: 'é©¼å³°ã€ä¸‹åˆ’çº¿ç­‰äº’è½¬' },
                { id: 'url-encode', name: 'URL ç¼–è§£ç ', icon: 'ğŸ”—', desc: 'URL ç¼–ç ä¸è§£ç ' },
                { id: 'lorem', name: 'å‡æ–‡ç”Ÿæˆ', icon: 'ğŸ“œ', desc: 'ç”Ÿæˆå ä½æ–‡æœ¬' },
                { id: 'regex-tester', name: 'æ­£åˆ™æµ‹è¯•', icon: 'ğŸ”', desc: 'æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•' }
            ],
            dev: [
                { id: 'json-format', name: 'JSON æ ¼å¼åŒ–', icon: 'ğŸ“‹', desc: 'ç¾åŒ–ã€å‹ç¼©ã€æ ¡éªŒ' },
                { id: 'code-playground', name: 'ä»£ç æ²™ç›’', icon: 'ğŸ’»', desc: 'HTML/CSS/JS å®æ—¶é¢„è§ˆ', badge: 'NEW' },
                { id: 'api-test', name: 'API æµ‹è¯•', icon: 'ğŸ”Œ', desc: 'HTTP è¯·æ±‚æµ‹è¯•å·¥å…·' },
                { id: 'regex', name: 'æ­£åˆ™è¡¨è¾¾å¼', icon: 'ğŸ”', desc: 'æµ‹è¯•ã€ç”Ÿæˆã€è§£é‡Š' },
                { id: 'color-picker', name: 'é¢œè‰²é€‰æ‹©å™¨', icon: 'ğŸ¨', desc: 'HEX/RGB/HSL äº’è½¬' },
                { id: 'github-stats', name: 'GitHub ç»Ÿè®¡', icon: 'ğŸ™', desc: 'æŸ¥è¯¢ç”¨æˆ·ä»“åº“ä¸è´¡çŒ®' },
                { id: 'uuid', name: 'UUID ç”Ÿæˆ', icon: 'ğŸ†”', desc: 'ç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦' },
                { id: 'timestamp', name: 'æ—¶é—´æˆ³è½¬æ¢', icon: 'â°', desc: 'Unix æ—¶é—´æˆ³è½¬æ¢' },
                { id: 'jwt-decode', name: 'JWT è§£ç ', icon: 'ğŸ”“', desc: 'JWT Token è§£æ' },
                { id: 'sql-format', name: 'SQL æ ¼å¼åŒ–', icon: 'ğŸ—ƒï¸', desc: 'SQL è¯­å¥ç¾åŒ–' },
                { id: 'html-entities', name: 'HTML å®ä½“', icon: 'ğŸ·ï¸', desc: 'HTML å®ä½“ç¼–ç è§£ç ' },
                { id: 'css-minify', name: 'CSS å‹ç¼©', icon: 'ğŸ—œï¸', desc: 'CSS å‹ç¼©ä¸æ ¼å¼åŒ–' },
                { id: 'js-minify', name: 'JS å‹ç¼©', icon: 'âš¡', desc: 'JavaScript å‹ç¼©' },
                { id: 'http-status', name: 'HTTP çŠ¶æ€ç ', icon: 'ğŸ“¡', desc: 'çŠ¶æ€ç é€ŸæŸ¥è¡¨' },
                { id: 'git-cheatsheet', name: 'Git é€ŸæŸ¥', icon: 'ğŸ“š', desc: 'Git å‘½ä»¤é€ŸæŸ¥è¡¨' }
            ],
            time: [
                { id: 'world-clock', name: 'ä¸–ç•Œæ—¶é’Ÿ', icon: 'ğŸŒ', desc: 'å…¨çƒä¸»è¦åŸå¸‚å®æ—¶æ—¶é—´' },
                { id: 'countdown', name: 'å€’è®¡æ—¶å™¨', icon: 'â³', desc: 'è‡ªå®šä¹‰ç›®æ ‡æ—¶é—´å€’è®¡æ—¶' },
                { id: 'lunar', name: 'å†œå†è½¬æ¢', icon: 'ğŸŒ™', desc: 'å…¬å†å†œå†äº’è½¬ï¼Œå«èŠ‚æ°”' },
                { id: 'stopwatch', name: 'ç§’è¡¨', icon: 'â±ï¸', desc: 'ç²¾ç¡®è®¡æ—¶ï¼Œæ”¯æŒåˆ†æ®µ' },
                { id: 'time-calc', name: 'æ—¶é—´è®¡ç®—', icon: 'ğŸ§®', desc: 'è®¡ç®—æ—¥æœŸå·®ã€åŠ å‡å¤©æ•°' },
                { id: 'pomodoro', name: 'ç•ªèŒ„é’Ÿ', icon: 'ğŸ…', desc: 'ä¸“æ³¨å·¥ä½œè®¡æ—¶å™¨' }
            ],
            life: [
                { id: 'weather', name: 'å¤©æ°”æŸ¥è¯¢', icon: 'ğŸŒ¤ï¸', desc: 'å®æ—¶å¤©æ°”ï¼Œ7å¤©é¢„æŠ¥', badge: 'HOT' },
                { id: 'exchange', name: 'æ±‡ç‡æ¢ç®—', icon: 'ğŸ’±', desc: 'å®æ—¶æ±‡ç‡ï¼Œå¤šå¸ç§' },
                { id: 'bmi', name: 'BMI è®¡ç®—', icon: 'âš–ï¸', desc: 'èº«ä½“è´¨é‡æŒ‡æ•°è®¡ç®—' },
                { id: 'calendar', name: 'ä¸‡å¹´å†', icon: 'ğŸ“…', desc: 'èŠ‚å‡æ—¥ã€é»„å†ã€å®œå¿Œ' },
                { id: 'unit-convert', name: 'å•ä½æ¢ç®—', icon: 'ğŸ“', desc: 'é•¿åº¦ã€é‡é‡ã€æ¸©åº¦ç­‰' },
                { id: 'calculator', name: 'ç§‘å­¦è®¡ç®—å™¨', icon: 'ğŸ”¢', desc: 'å¤æ‚æ•°å­¦è®¡ç®—' },
                { id: 'todo', name: 'å¾…åŠæ¸…å•', icon: 'âœ…', desc: 'ä»»åŠ¡ç®¡ç†ï¼Œæœ¬åœ°å­˜å‚¨' },
                { id: 'notes', name: 'å¿«é€Ÿç¬”è®°', icon: 'ğŸ“', desc: 'æœ¬åœ°ç¬”è®°ï¼Œæ”¯æŒå¯¼å‡º' }
            ],
            media: [
                { id: 'recorder', name: 'å½•éŸ³æœº', icon: 'ğŸ™ï¸', desc: 'å½•åˆ¶éŸ³é¢‘å¹¶ä¸‹è½½' },
                { id: 'video-editor', name: 'è§†é¢‘å‰ªè¾‘', icon: 'ğŸ¬', desc: 'ç®€å•è§†é¢‘ç¼–è¾‘' },
                { id: 'audio-convert', name: 'éŸ³é¢‘è½¬æ¢', icon: 'ğŸµ', desc: 'éŸ³é¢‘æ ¼å¼è½¬æ¢' },
                { id: 'screen-record', name: 'å±å¹•å½•åˆ¶', icon: 'ğŸ–¥ï¸', desc: 'å½•åˆ¶å±å¹•æ“ä½œ' },
                { id: 'media-player', name: 'åª’ä½“æ’­æ”¾å™¨', icon: 'â–¶ï¸', desc: 'æœ¬åœ°åª’ä½“æ’­æ”¾' }
            ],
            game: [
                { id: 'tetris', name: 'ä¿„ç½—æ–¯æ–¹å—', icon: 'ğŸ•¹ï¸', desc: 'ç»å…¸æ¸¸æˆï¼Œæœ¬åœ°æœ€é«˜åˆ†' },
                { id: 'quote-game', name: 'æ¯æ—¥åè¨€', icon: 'ğŸ’­', desc: 'åŠ±å¿—è¯­å½•ï¼Œä¸€é”®å¤åˆ¶' },
                { id: 'dice', name: 'æ·éª°å­', icon: 'ğŸ²', desc: 'å¤šé¢éª°ï¼Œéšæœºæ•°ç”Ÿæˆ' },
                { id: 'fortune', name: 'ä»Šæ—¥è¿åŠ¿', icon: 'ğŸ”®', desc: 'æ˜Ÿåº§è¿åŠ¿ï¼Œæ¯æ—¥æŠ½ç­¾' },
                { id: 'wallpaper', name: 'éšæœºå£çº¸', icon: 'ğŸ–¼ï¸', desc: 'é«˜è´¨é‡å£çº¸ä¸‹è½½' },
                { id: 'memory-game', name: 'è®°å¿†æ¸¸æˆ', icon: 'ğŸ§ ', desc: 'è®°å¿†å¡ç‰‡é…å¯¹' }
            ],
            data: [
                { id: 'hot-search', name: 'å®æ—¶çƒ­æœ', icon: 'ğŸ”¥', desc: 'å¾®åšã€çŸ¥ä¹ã€æŠ–éŸ³çƒ­æ¦œ' },
                { id: 'crypto', name: 'åŠ å¯†è´§å¸', icon: 'â‚¿', desc: 'æ¯”ç‰¹å¸ã€ä»¥å¤ªåŠå®æ—¶ä»·æ ¼' },
                { id: 'gold', name: 'è´µé‡‘å±', icon: 'ğŸ¥‡', desc: 'é»„é‡‘ã€ç™½é“¶å®æ—¶ä»·æ ¼' },
                { id: 'device', name: 'è®¾å¤‡ä¿¡æ¯', icon: 'ğŸ’»', desc: 'æ£€æµ‹å±å¹•ã€æµè§ˆå™¨ã€ç½‘ç»œ' },
                { id: 'ip-info', name: 'IP æŸ¥è¯¢', icon: 'ğŸŒ', desc: 'æŸ¥è¯¢ IP åœ°å€ä¿¡æ¯' },
                { id: 'speed-test', name: 'ç½‘é€Ÿæµ‹è¯•', icon: 'âš¡', desc: 'æµ‹è¯•ç½‘ç»œä¸‹è½½é€Ÿåº¦' },
                { id: 'whois', name: 'åŸŸåæŸ¥è¯¢', icon: 'ğŸ”', desc: 'åŸŸå Whois ä¿¡æ¯' }
            ]
        };
        
        const quotes = [
            { text: "ç”Ÿæ´»ä¸æ˜¯ç­‰å¾…é£æš´è¿‡å»ï¼Œè€Œæ˜¯å­¦ä¼šåœ¨é›¨ä¸­è·³èˆã€‚", author: "ç»´ç»´å®‰Â·æ ¼æ—" },
            { text: "æœªç»å®¡è§†çš„äººç”Ÿæ˜¯ä¸å€¼å¾—è¿‡çš„ã€‚", author: "è‹æ ¼æ‹‰åº•" },
            { text: "ç®€å•æ˜¯ç»ˆæçš„å¤æ‚ã€‚", author: "è¾¾Â·èŠ¬å¥‡" },
            { text: "ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œåªæ˜¯é¡ºä¾¿èƒ½è®©æœºå™¨è¿è¡Œã€‚", author: "Donald Knuth" },
            { text: "Stay hungry, stay foolish.", author: "Steve Jobs" },
            { text: "çŸ¥ä¹‹è€…ä¸å¦‚å¥½ä¹‹è€…ï¼Œå¥½ä¹‹è€…ä¸å¦‚ä¹ä¹‹è€…ã€‚", author: "å­”å­" },
            { text: "ä¸‡ç‰©ä¹‹å§‹ï¼Œå¤§é“è‡³ç®€ï¼Œè¡åŒ–è‡³ç¹ã€‚", author: "è€å­" },
            { text: "ç¨‹åºå‘˜ï¼šæŠŠå’–å•¡å˜æˆä»£ç çš„æœºå™¨ã€‚", author: "åŒ¿å" },
            { text: "æœ€å¥½çš„ä»£ç æ˜¯æ²¡æœ‰ä»£ç ã€‚", author: "Jeff Atwood" }
        ];
        
        let currentView = 'home';
        let historyStack = [];
        let favorites = JSON.parse(localStorage.getItem('toolverse-favorites') || '[]');
        
        // ==================== Initialization ====================
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            initParticles();
            init3DBackground();
            startClock();
            refreshQuote();
            initVisitorCount();
            initTypingEffect();
            loadMiniHotSearch();
            initPWA();
            
            // Update time every second
            setInterval(updateClock, 1000);
        });
        
        // ==================== Theme Management ====================
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && systemDark)) {
                document.documentElement.classList.add('dark');
            }
        }
        
        function toggleTheme() {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            showToast(isDark ? 'å·²åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼' : 'å·²åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼');
        }
        
        // ==================== 3D Background ====================
        function init3DBackground() {
            const canvas = document.getElementById('bg-canvas');
            if (!canvas || !THREE) return;
            
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
            
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            // Create particles
            const geometry = new THREE.BufferGeometry();
            const count = 1000;
            const positions = new Float32Array(count * 3);
            const colors = new Float32Array(count * 3);
            
            for (let i = 0; i < count * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 10;
                positions[i + 1] = (Math.random() - 0.5) * 10;
                positions[i + 2] = (Math.random() - 0.5) * 10;
                
                colors[i] = Math.random() * 0.5 + 0.5;
                colors[i + 1] = Math.random() * 0.3;
                colors[i + 2] = Math.random() * 0.5 + 0.5;
            }
            
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            
            const material = new THREE.PointsMaterial({
                size: 0.05,
                vertexColors: true,
                transparent: true,
                opacity: 0.6
            });
            
            const particles = new THREE.Points(geometry, material);
            scene.add(particles);
            
            camera.position.z = 3;
            
            // Animation
            function animate() {
                requestAnimationFrame(animate);
                particles.rotation.x += 0.0005;
                particles.rotation.y += 0.001;
                renderer.render(scene, camera);
            }
            
            animate();
            
            // Resize handler
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }
        
        // ==================== Particle Background ====================
        function initParticles() {
            const container = document.getElementById('particles');
            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c'];
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 10 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 20}s`;
                particle.style.animationDuration = `${15 + Math.random() * 10}s`;
                container.appendChild(particle);
            }
        }
        
        // ==================== Clock Functions ====================
        function startClock() {
            updateClock();
        }
        
        function updateClock() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', { hour12: false });
            const dateStr = now.toLocaleDateString('zh-CN', { 
                year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' 
            });
            
            const heroTime = document.getElementById('hero-time');
            const heroDate = document.getElementById('hero-date');
            
            if (heroTime) heroTime.textContent = timeStr;
            if (heroDate) heroDate.textContent = dateStr;
        }
        
        // ==================== Typing Effect ====================
        function initTypingEffect() {
            const text = "æç®€è®¾è®¡ï¼Œå¼ºå¤§åŠŸèƒ½ï¼Œæ— éœ€åç«¯ï¼Œå¼€ç®±å³ç”¨ã€‚50+ å·¥å…·ï¼ŒæŒç»­æ›´æ–°ä¸­...";
            const element = document.getElementById('typing-text');
            if (!element) return;
            
            let index = 0;
            element.textContent = '';
            
            function type() {
                if (index < text.length) {
                    element.textContent += text.charAt(index);
                    index++;
                    setTimeout(type, 80);
                }
            }
            
            type();
        }
        
        // ==================== Quote Functions ====================
        function refreshQuote() {
            const quote = quotes[Math.floor(Math.random() * quotes.length)];
            const quoteEl = document.getElementById('random-quote');
            const authorEl = document.getElementById('quote-author');
            
            if (quoteEl) quoteEl.textContent = quote.text;
            if (authorEl) authorEl.textContent = `â€”â€” ${quote.author}`;
        }
        
        // ==================== Visitor Statistics ====================
        function initVisitorCount() {
            const count = Math.floor(Math.random() * 9000) + 1000;
            const countEl = document.getElementById('visitor-count');
            if (countEl) countEl.textContent = `${count.toLocaleString()} æ¬¡è®¿é—®`;
        }
        
        // ==================== Mini Hot Search ====================
        function loadMiniHotSearch() {
            // Weibo
            const weiboMini = document.getElementById('weibo-mini');
            if (weiboMini) {
                weiboMini.innerHTML = ['æ˜¥èŠ‚æ”¾å‡å®‰æ’', 'æ–°å¹´ç¥ç¦', 'ç§‘æŠ€æ–°é—»'].map((item, i) => `
                    <div class="flex items-center space-x-2">
                        <span class="text-xs ${i === 0 ? 'text-red-500' : 'text-gray-500'}">${i + 1}</span>
                        <span class="truncate">${item}</span>
                    </div>
                `).join('');
            }
            
            // Zhihu
            const zhihuMini = document.getElementById('zhihu-mini');
            if (zhihuMini) {
                zhihuMini.innerHTML = ['å¦‚ä½•è¯„ä»·æ–°æŠ€æœ¯', '2024å¹´å±•æœ›', 'èŒåœºç»éªŒ'].map((item, i) => `
                    <div class="flex items-center space-x-2">
                        <span class="text-xs ${i === 0 ? 'text-blue-500' : 'text-gray-500'}">${i + 1}</span>
                        <span class="truncate">${item}</span>
                    </div>
                `).join('');
            }
            
            // Douyin
            const douyinMini = document.getElementById('douyin-mini');
            if (douyinMini) {
                douyinMini.innerHTML = ['çƒ­é—¨æŒ‘æˆ˜', 'ç¾é£Ÿæ¢åº—', 'æ—…æ¸¸æ”»ç•¥'].map((item, i) => `
                    <div class="flex items-center space-x-2">
                        <span class="text-xs ${i === 0 ? 'text-green-500' : 'text-gray-500'}">${i + 1}</span>
                        <span class="truncate">${item}</span>
                    </div>
                `).join('');
            }
        }
        
        // ==================== Navigation & View Management ====================
        function showHome() {
            historyStack = [];
            switchView('home-view');
            currentView = 'home';
        }
        
        function showCategory(category) {
            historyStack.push('home');
            
            if (category === 'all') {
                renderAllTools();
            } else if (category === 'favorites') {
                renderFavorites();
            } else {
                renderCategoryTools(category);
            }
        }
        
        function goBack() {
            if (historyStack.length > 0) {
                const prev = historyStack.pop();
                if (prev === 'home') {
                    showHome();
                } else {
                    showCategory(prev);
                }
            } else {
                showHome();
            }
        }
        
        function switchView(viewId) {
            const homeView = document.getElementById('home-view');
            const toolView = document.getElementById('tool-view');
            
            if (homeView) homeView.classList.add('hidden');
            if (toolView) toolView.classList.add('hidden');
            
            const targetView = document.getElementById(viewId);
            if (targetView) targetView.classList.remove('hidden');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // ==================== Search Functionality ====================
        function handleSearch(query) {
            const resultsDiv = document.getElementById('search-results');
            
            if (!query.trim()) {
                resultsDiv.classList.add('hidden');
                return;
            }
            
            const allTools = [];
            Object.keys(tools).forEach(cat => {
                tools[cat].forEach(tool => {
                    allTools.push({ ...tool, category: cat });
                });
            });
            
            const filtered = allTools.filter(tool => 
                tool.name.includes(query) || tool.desc.includes(query)
            );
            
            if (filtered.length === 0) {
                resultsDiv.innerHTML = '<div class="p-4 text-gray-500 text-center">æœªæ‰¾åˆ°ç›¸å…³å·¥å…·</div>';
            } else {
                resultsDiv.innerHTML = filtered.map(tool => `
                    <div onclick="loadTool('${tool.id}')" class="p-3 hover:bg-gray-100 dark:hover:bg-slate-800 cursor-pointer flex items-center space-x-3 border-b dark:border-gray-700 last:border-0">
                        <span class="text-2xl">${tool.icon}</span>
                        <div class="flex-1">
                            <div class="font-medium">${tool.name}</div>
                            <div class="text-xs text-gray-500">${tool.desc}</div>
                        </div>
                        ${tool.badge ? `<span class="px-2 py-1 text-xs rounded-full ${tool.badge === 'HOT' ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}">${tool.badge}</span>` : ''}
                    </div>
                `).join('');
            }
            
            resultsDiv.classList.remove('hidden');
        }
        
        // Close search when clicking outside
        document.addEventListener('click', (e) => {
            const searchContainer = document.getElementById('search-results');
            const searchInput = document.getElementById('global-search');
            if (searchContainer && searchInput && !searchInput.contains(e.target) && !searchContainer.contains(e.target)) {
                searchContainer.classList.add('hidden');
            }
        });
        
        // ==================== Tool Rendering ====================
        function renderAllTools() {
            let html = `
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold gradient-text">å…¨éƒ¨å·¥å…·</h2>
                    <div class="text-sm text-gray-500">
                        å…± ${Object.values(tools).flat().length} ä¸ªå·¥å…·
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            `;
            
            Object.keys(tools).forEach(cat => {
                tools[cat].forEach(tool => {
                    html += createToolCard(tool, cat);
                });
            });
            
            html += '</div>';
            document.getElementById('tool-content').innerHTML = html;
            switchView('tool-view');
        }
        
        function renderFavorites() {
            let html = `
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold gradient-text">æˆ‘çš„æ”¶è—</h2>
                </div>
            `;
            
            if (favorites.length === 0) {
                html += `
                    <div class="text-center py-20">
                        <i class="fas fa-star text-6xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500">è¿˜æ²¡æœ‰æ”¶è—ä»»ä½•å·¥å…·</p>
                        <button onclick="showCategory('all')" class="mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg">
                            æµè§ˆå…¨éƒ¨å·¥å…·
                        </button>
                    </div>
                `;
            } else {
                html += '<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">';
                favorites.forEach(toolId => {
                    const tool = findToolById(toolId);
                    if (tool) {
                        html += createToolCard(tool);
                    }
                });
                html += '</div>';
            }
            
            document.getElementById('tool-content').innerHTML = html;
            switchView('tool-view');
        }
        
        function renderCategoryTools(category) {
            const categoryNames = {
                ai: 'ğŸ¤– AI æ™ºèƒ½å·¥å…·',
                image: 'ğŸ¨ å›¾ç‰‡å¤„ç†å·¥å…·',
                text: 'ğŸ“ æ–‡æœ¬å¤„ç†å·¥å…·',
                dev: 'ğŸ’» å¼€å‘è¾…åŠ©å·¥å…·',
                time: 'â° æ—¶é—´æ—¥æœŸå·¥å…·',
                life: 'ğŸŒŸ ç”Ÿæ´»å®ç”¨å·¥å…·',
                media: 'ğŸ¬ å¤šåª’ä½“å·¥å…·',
                game: 'ğŸ® ä¼‘é—²å¨±ä¹å·¥å…·',
                data: 'ğŸ“Š æ•°æ®ä¿¡æ¯å·¥å…·'
            };
            
            let html = `
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold gradient-text">${categoryNames[category]}</h2>
                    <div class="text-sm text-gray-500">
                        å…± ${tools[category].length} ä¸ªå·¥å…·
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            `;
            
            tools[category].forEach(tool => {
                html += createToolCard(tool, category);
            });
            
            html += '</div>';
            document.getElementById('tool-content').innerHTML = html;
            switchView('tool-view');
        }
        
        function createToolCard(tool, category = '') {
            const isFavorite = favorites.includes(tool.id);
            return `
                <div class="tool-card glass rounded-2xl p-6 cursor-pointer hover:shadow-2xl border border-gray-200 dark:border-gray-700 group relative">
                    <div class="flex justify-between items-start mb-4">
                        <span class="text-4xl group-hover:scale-110 transition-transform">${tool.icon}</span>
                        <div class="flex items-center space-x-2">
                            ${tool.badge ? `<span class="px-2 py-1 text-xs rounded-full ${tool.badge === 'HOT' ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}">${tool.badge}</span>` : ''}
                            <button onclick="event.stopPropagation(); toggleFavorite('${tool.id}')" class="text-gray-400 hover:text-yellow-500 transition-colors">
                                <i class="fas fa-star ${isFavorite ? 'text-yellow-500' : ''}"></i>
                            </button>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold mb-2">${tool.name}</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm mb-4">${tool.desc}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-400">${category}</span>
                        <button onclick="event.stopPropagation(); loadTool('${tool.id}')" class="px-4 py-2 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 transition-colors">
                            æ‰“å¼€
                        </button>
                    </div>
                </div>
            `;
        }
        
        function findToolById(toolId) {
            for (const cat in tools) {
                const found = tools[cat].find(t => t.id === toolId);
                if (found) return found;
            }
            return null;
        }
        
        function toggleFavorite(toolId) {
            const index = favorites.indexOf(toolId);
            if (index === -1) {
                favorites.push(toolId);
                showToast('å·²æ·»åŠ åˆ°æ”¶è—');
            } else {
                favorites.splice(index, 1);
                showToast('å·²ä»æ”¶è—ç§»é™¤');
            }
            localStorage.setItem('toolverse-favorites', JSON.stringify(favorites));
            
            // Refresh view if in favorites
            if (currentView === 'favorites') {
                renderFavorites();
            }
        }
        
        // ==================== Tool Loading (Core Functionality) ====================
        function loadTool(toolId) {
            historyStack.push(currentView);
            currentView = toolId;
            
            const toolContent = document.getElementById('tool-content');
            const tool = findToolById(toolId);
            
            if (!tool) {
                toolContent.innerHTML = `<div class="text-center py-20"><i class="fas fa-tools text-6xl mb-4 text-gray-300"></i><p>å·¥å…·å¼€å‘ä¸­...</p></div>`;
                switchView('tool-view');
                return;
            }
            
            // Render tool header
            let header = `
                <div class="glass rounded-2xl p-6 mb-6 border border-gray-200 dark:border-gray-700">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <span class="text-5xl">${tool.icon}</span>
                            <div>
                                <h2 class="text-2xl font-bold">${tool.name}</h2>
                                <p class="text-gray-600 dark:text-gray-400">${tool.desc}</p>
                            </div>
                        </div>
                        <button onclick="toggleFavorite('${tool.id}')" class="p-3 rounded-full hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-star text-xl ${favorites.includes(tool.id) ? 'text-yellow-500' : 'text-gray-400'}"></i>
                        </button>
                    </div>
                </div>
            `;
            
            switch(toolId) {
                case 'ai-chat':
                    toolContent.innerHTML = header + renderAIChat();
                    break;
                case 'image-editor':
                    toolContent.innerHTML = header + renderImageEditor();
                    initImageEditor();
                    break;
                case 'markdown':
                    toolContent.innerHTML = header + renderMarkdownEditor();
                    break;
                case 'qrcode':
                    toolContent.innerHTML = header + renderQRCode();
                    break;
                case 'json-format':
                    toolContent.innerHTML = header + renderJSONFormatter();
                    break;
                case 'color-picker':
                    toolContent.innerHTML = header + renderColorPicker();
                    initColorPicker();
                    break;
                case 'weather':
                    toolContent.innerHTML = header + renderWeather();
                    loadWeather();
                    break;
                case 'tetris':
                    toolContent.innerHTML = header + renderTetris();
                    setTimeout(() => initTetris(), 100);
                    break;
                case 'hot-search':
                    toolContent.innerHTML = header + renderHotSearch();
                    loadHotSearch();
                    break;
                case 'crypto':
                    toolContent.innerHTML = header + renderCrypto();
                    loadCrypto();
                    break;
                case 'device':
                    toolContent.innerHTML = header + renderDeviceInfo();
                    break;
                case 'password':
                    toolContent.innerHTML = header + renderPasswordGenerator();
                    break;
                case 'text-stats':
                    toolContent.innerHTML = header + renderTextStats();
                    break;
                case 'exchange':
                    toolContent.innerHTML = header + renderExchange();
                    break;
                case 'bmi':
                    toolContent.innerHTML = header + renderBMI();
                    break;
                case 'github-stats':
                    toolContent.innerHTML = header + renderGitHubStats();
                    break;
                case 'fortune':
                    toolContent.innerHTML = header + renderFortune();
                    break;
                case 'world-clock':
                    toolContent.innerHTML = header + renderWorldClock();
                    initWorldClock();
                    break;
                case 'countdown':
                    toolContent.innerHTML = header + renderCountdown();
                    break;
                case 'stopwatch':
                    toolContent.innerHTML = header + renderStopwatch();
                    break;
                case 'code-playground':
                    toolContent.innerHTML = header + renderCodePlayground();
                    break;
                case 'uuid':
                    toolContent.innerHTML = header + renderUUIDGenerator();
                    generateUUID();
                    break;
                case 'timestamp':
                    toolContent.innerHTML = header + renderTimestampConverter();
                    updateTimestamp();
                    break;
                case 'recorder':
                    toolContent.innerHTML = header + renderRecorder();
                    break;
                case 'todo':
                    toolContent.innerHTML = header + renderTodoList();
                    loadTodos();
                    break;
                case 'pomodoro':
                    toolContent.innerHTML = header + renderPomodoro();
                    break;
                default:
                    toolContent.innerHTML = header + `<div class="text-center py-20"><i class="fas fa-tools text-6xl mb-4 text-gray-300"></i><p>å·¥å…·å¼€å‘ä¸­...</p><p class="text-sm text-gray-500 mt-2">å³å°†ä¸Šçº¿</p></div>`;
            }
            
            switchView('tool-view');
        }
        
        // ==================== Specific Tool Implementations ====================
        
        // AI Chat
        function renderAIChat() {
            return `
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="md:col-span-2 glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <div id="chat-messages" class="h-96 overflow-y-auto mb-4 space-y-4">
                            <div class="flex items-start space-x-3">
                                <div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="flex-1 glass rounded-2xl p-4">
                                    <p>ä½ å¥½ï¼æˆ‘æ˜¯ AI åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ</p>
                                    <p class="text-xs text-gray-500 mt-2">æç¤ºï¼šè¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿç•Œé¢ï¼Œå®é™…åŠŸèƒ½éœ€è¦æ¥å…¥ AI API</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="chat-input" placeholder="è¾“å…¥ä½ çš„é—®é¢˜..." class="flex-1 px-4 py-3 rounded-xl border dark:border-gray-600 dark:bg-slate-800" onkeypress="if(event.key==='Enter')sendChatMessage()">
                            <button onclick="sendChatMessage()" class="px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-4">å¿«æ·æŒ‡ä»¤</h3>
                        <div class="space-y-2">
                            <button onclick="quickChat('å¸®æˆ‘å†™ä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—')" class="w-full text-left px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">
                                ğŸ“ å¸®æˆ‘å†™ä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—
                            </button>
                            <button onclick="quickChat('è§£é‡Šä¸€ä¸‹é‡å­è®¡ç®—')" class="w-full text-left px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">
                                ğŸ”¬ è§£é‡Šä¸€ä¸‹é‡å­è®¡ç®—
                            </button>
                            <button onclick="quickChat('ç»™æˆ‘è®²ä¸ªç¬‘è¯')" class="w-full text-left px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">
                                ğŸ˜„ ç»™æˆ‘è®²ä¸ªç¬‘è¯
                            </button>
                            <button onclick="quickChat('ç¿»è¯‘æˆè‹±æ–‡ï¼šä½ å¥½ä¸–ç•Œ')" class="w-full text-left px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">
                                ğŸŒ ç¿»è¯‘æˆè‹±æ–‡ï¼šä½ å¥½ä¸–ç•Œ
                            </button>
                        </div>
                        
                        <h3 class="font-bold mb-4 mt-8">æ¨¡å‹è®¾ç½®</h3>
                        <select class="w-full px-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-slate-800">
                            <option>GPT-4 (æ¨¡æ‹Ÿ)</option>
                            <option>GPT-3.5 (æ¨¡æ‹Ÿ)</option>
                            <option>Claude (æ¨¡æ‹Ÿ)</option>
                        </select>
                    </div>
                </div>
            `;
        }
        
        function quickChat(message) {
            document.getElementById('chat-input').value = message;
            sendChatMessage();
        }
        
        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;
            
            const container = document.getElementById('chat-messages');
            
            // Add user message
            container.innerHTML += `
                <div class="flex items-start space-x-3 justify-end">
                    <div class="flex-1 glass rounded-2xl p-4 bg-indigo-100 dark:bg-indigo-900 max-w-md ml-auto">
                        <p>${message}</p>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-gray-600 flex items-center justify-center text-white">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
            `;
            
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const responses = [
                    "è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼è®©æˆ‘æ¥ä¸ºä½ è¯¦ç»†è§£ç­”...",
                    "æˆ‘ç†è§£ä½ çš„éœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å»ºè®®ï¼š",
                    "æ ¹æ®ä½ çš„æè¿°ï¼Œæˆ‘è®¤ä¸ºå¯ä»¥è¿™æ ·å¤„ç†ï¼š",
                    "è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„æŒ‘æˆ˜ï¼Œè®©æˆ‘æ€è€ƒä¸€ä¸‹..."
                ];
                
                const response = responses[Math.floor(Math.random() * responses.length)] + "\n\nè¿™æ˜¯æ¨¡æ‹Ÿçš„ AI å›å¤ã€‚è¦å¯ç”¨çœŸå®çš„ AI å¯¹è¯åŠŸèƒ½ï¼Œéœ€è¦é…ç½® AI API å¯†é’¥ï¼ˆå¦‚ OpenAIã€Claude ç­‰ï¼‰ã€‚";
                
                container.innerHTML += `
                    <div class="flex items-start space-x-3">
                        <div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="flex-1 glass rounded-2xl p-4">
                            <p class="whitespace-pre-line">${response}</p>
                        </div>
                    </div>
                `;
                
                container.scrollTop = container.scrollHeight;
            }, 1000);
        }
        
        // Image Editor
        function renderImageEditor() {
            return `
                <div class="grid md:grid-cols-4 gap-6">
                    <div class="md:col-span-3">
                        <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700 mb-4">
                            <div class="flex items-center justify-center min-h-96 relative" id="image-preview-container">
                                <div id="upload-area" class="text-center">
                                    <input type="file" id="image-input" accept="image/*" class="hidden" onchange="handleImageUpload(event)">
                                    <button onclick="document.getElementById('image-input').click()" class="px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700">
                                        <i class="fas fa-upload mr-2"></i>ä¸Šä¼ å›¾ç‰‡
                                    </button>
                                    <p class="text-sm text-gray-500 mt-2">æ”¯æŒ JPG, PNG, WebP æ ¼å¼</p>
                                </div>
                                <img id="preview-image" class="hidden max-w-full max-h-96" />
                            </div>
                        </div>
                        
                        <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                            <h3 class="font-bold mb-4">æ»¤é•œæ•ˆæœ</h3>
                            <div class="grid grid-cols-4 md:grid-cols-8 gap-3">
                                <button onclick="applyFilter('none')" class="p-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800 text-xs">
                                    <div class="w-12 h-12 mx-auto mb-1 rounded bg-gradient-to-br from-gray-200 to-gray-300"></div>
                                    åŸå›¾
                                </button>
                                <button onclick="applyFilter('grayscale')" class="p-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800 text-xs">
                                    <div class="w-12 h-12 mx-auto mb-1 rounded bg-gradient-to-br from-gray-400 to-gray-600"></div>
                                    ç°åº¦
                                </button>
                                <button onclick="applyFilter('sepia')" class="p-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800 text-xs">
                                    <div class="w-12 h-12 mx-auto mb-1 rounded bg-gradient-to-br from-yellow-600 to-orange-600"></div>
                                    å¤å¤
                                </button>
                                <button onclick="applyFilter('blur')" class="p-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800 text-xs">
                                    <div class="w-12 h-12 mx-auto mb-1 rounded bg-gradient-to-br from-blue-200 to-blue-300"></div>
                                    æ¨¡ç³Š
                                </button>
                                <button onclick="applyFilter('brightness')" class="p-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800 text-xs">
                                    <div class="w-12 h-12 mx-auto mb-1 rounded bg-gradient-to-br from-white to-yellow-100"></div>
                                    äº®åº¦
                                </button>
                                <button onclick="applyFilter('contrast')" class="p-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800 text-xs">
                                    <div class="w-12 h-12 mx-auto mb-1 rounded bg-gradient-to-br from-black to-white"></div>
                                    å¯¹æ¯”
                                </button>
                                <button onclick="applyFilter('saturate')" class="p-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800 text-xs">
                                    <div class="w-12 h-12 mx-auto mb-1 rounded bg-gradient-to-br from-red-400 to-blue-400"></div>
                                    é¥±å’Œ
                                </button>
                                <button onclick="applyFilter('invert')" class="p-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800 text-xs">
                                    <div class="w-12 h-12 mx-auto mb-1 rounded bg-gradient-to-br from-black to-white"></div>
                                    åç›¸
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                            <h3 class="font-bold mb-4">è°ƒæ•´</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="text-sm">äº®åº¦</label>
                                    <input type="range" id="brightness-slider" min="0" max="200" value="100" class="w-full" oninput="updateImageAdjustments()">
                                </div>
                                <div>
                                    <label class="text-sm">å¯¹æ¯”åº¦</label>
                                    <input type="range" id="contrast-slider" min="0" max="200" value="100" class="w-full" oninput="updateImageAdjustments()">
                                </div>
                                <div>
                                    <label class="text-sm">é¥±å’Œåº¦</label>
                                    <input type="range" id="saturate-slider" min="0" max="200" value="100" class="w-full" oninput="updateImageAdjustments()">
                                </div>
                            </div>
                        </div>
                        
                        <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                            <h3 class="font-bold mb-4">æ“ä½œ</h3>
                            <div class="space-y-2">
                                <button onclick="rotateImage(-90)" class="w-full py-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800">
                                    <i class="fas fa-undo mr-2"></i>å·¦æ—‹è½¬
                                </button>
                                <button onclick="rotateImage(90)" class="w-full py-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800">
                                    <i class="fas fa-redo mr-2"></i>å³æ—‹è½¬
                                </button>
                                <button onclick="flipImage('h')" class="w-full py-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800">
                                    <i class="fas fa-arrows-alt-h mr-2"></i>æ°´å¹³ç¿»è½¬
                                </button>
                                <button onclick="flipImage('v')" class="w-full py-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-800">
                                    <i class="fas fa-arrows-alt-v mr-2"></i>å‚ç›´ç¿»è½¬
                                </button>
                            </div>
                        </div>
                        
                        <button onclick="downloadEditedImage()" class="w-full py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700">
                            <i class="fas fa-download mr-2"></i>ä¸‹è½½å›¾ç‰‡
                        </button>
                    </div>
                </div>
            `;
        }
        
        let imageEditorState = {
            rotation: 0,
            flipH: false,
            flipV: false,
            filter: 'none',
            brightness: 100,
            contrast: 100,
            saturate: 100
        };
        
        function initImageEditor() {
            imageEditorState = {
                rotation: 0,
                flipH: false,
                flipV: false,
                filter: 'none',
                brightness: 100,
                contrast: 100,
                saturate: 100
            };
        }
        
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = document.getElementById('preview-image');
                img.src = e.target.result;
                img.classList.remove('hidden');
                document.getElementById('upload-area').classList.add('hidden');
                initImageEditor();
            };
            reader.readAsDataURL(file);
        }
        
        function applyFilter(filter) {
            imageEditorState.filter = filter;
            updateImagePreview();
        }
        
        function updateImageAdjustments() {
            imageEditorState.brightness = document.getElementById('brightness-slider').value;
            imageEditorState.contrast = document.getElementById('contrast-slider').value;
            imageEditorState.saturate = document.getElementById('saturate-slider').value;
            updateImagePreview();
        }
        
        function rotateImage(degrees) {
            imageEditorState.rotation += degrees;
            updateImagePreview();
        }
        
        function flipImage(direction) {
            if (direction === 'h') {
                imageEditorState.flipH = !imageEditorState.flipH;
            } else {
                imageEditorState.flipV = !imageEditorState.flipV;
            }
            updateImagePreview();
        }
        
        function updateImagePreview() {
            const img = document.getElementById('preview-image');
            if (!img.src) return;
            
            let filter = `brightness(${imageEditorState.brightness}%) contrast(${imageEditorState.contrast}%) saturate(${imageEditorState.saturate}%)`;
            
            if (imageEditorState.filter === 'grayscale') filter += ' grayscale(100%)';
            if (imageEditorState.filter === 'sepia') filter += ' sepia(100%)';
            if (imageEditorState.filter === 'blur') filter += ' blur(3px)';
            if (imageEditorState.filter === 'invert') filter += ' invert(100%)';
            
            img.style.filter = filter;
            img.style.transform = `rotate(${imageEditorState.rotation}deg) scaleX(${imageEditorState.flipH ? -1 : 1}) scaleY(${imageEditorState.flipV ? -1 : 1})`;
        }
        
        function downloadEditedImage() {
            const img = document.getElementById('preview-image');
            if (!img.src) {
                showToast('è¯·å…ˆä¸Šä¼ å›¾ç‰‡');
                return;
            }
            
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = img.naturalWidth;
            canvas.height = img.naturalHeight;
            
            // Apply transformations
            ctx.filter = img.style.filter || 'none';
            ctx.translate(canvas.width / 2, canvas.height / 2);
            ctx.rotate(imageEditorState.rotation * Math.PI / 180);
            ctx.scale(imageEditorState.flipH ? -1 : 1, imageEditorState.flipV ? -1 : 1);
            ctx.drawImage(img, -canvas.width / 2, -canvas.height / 2);
            
            // Download
            const link = document.createElement('a');
            link.download = 'edited-image.png';
            link.href = canvas.toDataURL();
            link.click();
            
            showToast('å›¾ç‰‡å·²ä¸‹è½½');
        }
        
        // Markdown Editor
        function renderMarkdownEditor() {
            return `
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold">Markdown</h3>
                            <div class="flex gap-2">
                                <button onclick="insertMarkdown('# ')" class="px-3 py-1 rounded border hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">H1</button>
                                <button onclick="insertMarkdown('## ')" class="px-3 py-1 rounded border hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">H2</button>
                                <button onclick="insertMarkdown('**', '**')" class="px-3 py-1 rounded border hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">B</button>
                                <button onclick="insertMarkdown('*', '*')" class="px-3 py-1 rounded border hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">I</button>
                                <button onclick="insertMarkdown('`', '`')" class="px-3 py-1 rounded border hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">Code</button>
                                <button onclick="insertMarkdown('[', '](url)')" class="px-3 py-1 rounded border hover:bg-gray-100 dark:hover:bg-slate-800 text-sm">Link</button>
                            </div>
                        </div>
                        <textarea id="markdown-input" class="w-full h-96 p-4 rounded-lg border dark:border-gray-600 dark:bg-slate-800 font-mono text-sm" placeholder="è¾“å…¥ Markdown..." oninput="updateMarkdownPreview()"># æ¬¢è¿ä½¿ç”¨ Markdown ç¼–è¾‘å™¨

è¿™æ˜¯ä¸€ä¸ª **ç¤ºä¾‹** æ–‡æœ¬ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- å®æ—¶é¢„è§ˆ
- å¯¼å‡º HTML
- å¯¼å‡º PDF

\`\`\`javascript
console.log('Hello, World!');
\`\`\`
</textarea>
                    </div>
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold">é¢„è§ˆ</h3>
                            <div class="flex gap-2">
                                <button onclick="exportMarkdownHTML()" class="px-3 py-1 rounded bg-indigo-600 text-white text-sm hover:bg-indigo-700">å¯¼å‡º HTML</button>
                            </div>
                        </div>
                        <div id="markdown-preview" class="prose dark:prose-invert max-w-none h-96 overflow-y-auto p-4 rounded-lg border dark:border-gray-600">
                        </div>
                    </div>
                </div>
            `;
        }
        
        function updateMarkdownPreview() {
            const input = document.getElementById('markdown-input');
            const preview = document.getElementById('markdown-preview');
            if (input && preview && typeof marked !== 'undefined') {
                preview.innerHTML = marked.parse(input.value);
            }
        }
        
        function insertMarkdown(before, after = '') {
            const textarea = document.getElementById('markdown-input');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const text = textarea.value;
            const selectedText = text.substring(start, end);
            
            textarea.value = text.substring(0, start) + before + selectedText + after + text.substring(end);
            textarea.focus();
            textarea.selectionStart = start + before.length;
            textarea.selectionEnd = start + before.length + selectedText.length;
            
            updateMarkdownPreview();
        }
        
        function exportMarkdownHTML() {
            const preview = document.getElementById('markdown-preview');
            const html = `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Markdown Export</title>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 800px; margin: 0 auto; padding: 2rem; }
        pre { background: #f5f5f5; padding: 1rem; border-radius: 8px; overflow-x: auto; }
        code { background: #f5f5f5; padding: 0.2rem 0.4rem; border-radius: 4px; }
    </style>
</head>
<body>
${preview.innerHTML}
</body>
</html>`;
            
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'markdown-export.html';
            link.click();
            
            showToast('HTML å·²å¯¼å‡º');
        }
        
        // QR Code Generator
        function renderQRCode() {
            return `
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-4">è¾“å…¥å†…å®¹</h3>
                        <textarea id="qr-text" rows="4" class="w-full px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800 mb-4" placeholder="è¾“å…¥ç½‘å€æˆ–æ–‡æœ¬..."></textarea>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="text-sm font-medium mb-2 block">å‰æ™¯è‰²</label>
                                <input type="color" id="qr-fg" value="#000000" class="w-full h-10 rounded-lg">
                            </div>
                            <div>
                                <label class="text-sm font-medium mb-2 block">èƒŒæ™¯è‰²</label>
                                <input type="color" id="qr-bg" value="#ffffff" class="w-full h-10 rounded-lg">
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="text-sm font-medium mb-2 block">å°ºå¯¸</label>
                            <input type="range" id="qr-size" min="100" max="400" value="200" class="w-full">
                        </div>
                        
                        <button onclick="generateQR()" class="w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                            <i class="fas fa-qrcode mr-2"></i>ç”ŸæˆäºŒç»´ç 
                        </button>
                    </div>
                    
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700 flex flex-col items-center justify-center">
                        <div id="qr-result" class="mb-4"></div>
                        <button onclick="downloadQR()" id="qr-download" class="hidden px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600">
                            <i class="fas fa-download mr-2"></i>ä¸‹è½½äºŒç»´ç 
                        </button>
                    </div>
                </div>
            `;
        }
        
        let currentQR = null;
        
        function generateQR() {
            const text = document.getElementById('qr-text').value;
            if (!text) {
                showToast('è¯·è¾“å…¥å†…å®¹');
                return;
            }
            
            const fg = document.getElementById('qr-fg').value;
            const bg = document.getElementById('qr-bg').value;
            const size = parseInt(document.getElementById('qr-size').value);
            const container = document.getElementById('qr-result');
            
            container.innerHTML = '';
            
            if (typeof QRCode !== 'undefined') {
                currentQR = new QRCode(container, {
                    text: text,
                    width: size,
                    height: size,
                    colorDark: fg,
                    colorLight: bg,
                    correctLevel: QRCode.CorrectLevel.H
                });
            } else {
                // Fallback if QRCode library not loaded
                container.innerHTML = `<div class="w-48 h-48 bg-gray-200 flex items-center justify-center">äºŒç»´ç ç”Ÿæˆå™¨åŠ è½½ä¸­...</div>`;
            }
            
            document.getElementById('qr-download').classList.remove('hidden');
        }
        
        function downloadQR() {
            const img = document.querySelector('#qr-result img');
            if (img) {
                const link = document.createElement('a');
                link.download = 'qrcode.png';
                link.href = img.src;
                link.click();
                showToast('äºŒç»´ç å·²ä¸‹è½½');
            }
        }
        
        // JSON Formatter
        function renderJSONFormatter() {
            return `
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="flex flex-col">
                        <div class="flex gap-2 mb-2">
                            <button onclick="formatJSON()" class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700">æ ¼å¼åŒ–</button>
                            <button onclick="compressJSON()" class="px-4 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700">å‹ç¼©</button>
                            <button onclick="clearJSON()" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600">æ¸…ç©º</button>
                            <button onclick="loadSampleJSON()" class="px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700">ç¤ºä¾‹</button>
                        </div>
                        <textarea id="json-input" class="flex-1 p-4 rounded-lg border dark:border-gray-600 dark:bg-slate-800 font-mono text-sm min-h-96" placeholder="ç²˜è´´ JSON..."></textarea>
                    </div>
                    <div class="flex flex-col">
                        <div class="flex gap-2 mb-2">
                            <button onclick="copyJSON()" class="px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700">
                                <i class="fas fa-copy mr-1"></i>å¤åˆ¶
                            </button>
                            <button onclick="downloadJSON()" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700">
                                <i class="fas fa-download mr-1"></i>ä¸‹è½½
                            </button>
                        </div>
                        <pre id="json-output" class="flex-1 p-4 rounded-lg border dark:border-gray-600 dark:bg-slate-800 overflow-auto font-mono text-sm min-h-96"></pre>
                    </div>
                </div>
            `;
        }
        
        function formatJSON() {
            try {
                const input = document.getElementById('json-input').value;
                const obj = JSON.parse(input);
                document.getElementById('json-output').textContent = JSON.stringify(obj, null, 2);
                showToast('æ ¼å¼åŒ–æˆåŠŸ');
            } catch (e) {
                document.getElementById('json-output').innerHTML = `<span class="text-red-500">é”™è¯¯ï¼š${e.message}</span>`;
            }
        }
        
        function compressJSON() {
            try {
                const input = document.getElementById('json-input').value;
                const obj = JSON.parse(input);
                document.getElementById('json-output').textContent = JSON.stringify(obj);
                showToast('å‹ç¼©æˆåŠŸ');
            } catch (e) {
                document.getElementById('json-output').innerHTML = `<span class="text-red-500">é”™è¯¯ï¼š${e.message}</span>`;
            }
        }
        
        function clearJSON() {
            document.getElementById('json-input').value = '';
            document.getElementById('json-output').textContent = '';
        }
        
        function loadSampleJSON() {
            const sample = {
                "name": "ToolVerse Pro",
                "version": "2.0.0",
                "description": "æç®€å·¥å…·å®‡å®™",
                "features": ["AI åŠ©æ‰‹", "å›¾ç‰‡ç¼–è¾‘", "Markdown ç¼–è¾‘å™¨"],
                "author": {
                    "name": "ToolVerse Team",
                    "email": "hello@toolverse.com"
                },
                "tools": 50,
                "free": true
            };
            document.getElementById('json-input').value = JSON.stringify(sample, null, 2);
            formatJSON();
        }
        
        function copyJSON() {
            const text = document.getElementById('json-output').textContent;
            navigator.clipboard.writeText(text).then(() => showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'));
        }
        
        function downloadJSON() {
            const text = document.getElementById('json-output').textContent;
            const blob = new Blob([text], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'data.json';
            link.click();
            showToast('JSON å·²ä¸‹è½½');
        }
        
        // Color Picker
        function renderColorPicker() {
            return `
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <input type="color" id="color-input" class="w-full h-32 rounded-lg mb-6 cursor-pointer" value="#6366f1">
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm font-medium">HEX</label>
                                <div class="flex gap-2">
                                    <input type="text" id="color-hex" class="flex-1 px-3 py-2 rounded border dark:border-gray-600 dark:bg-slate-800 font-mono" readonly>
                                    <button onclick="copyColor('hex')" class="px-3 py-2 bg-indigo-600 text-white rounded">å¤åˆ¶</button>
                                </div>
                            </div>
                            <div>
                                <label class="text-sm font-medium">RGB</label>
                                <div class="flex gap-2">
                                    <input type="text" id="color-rgb" class="flex-1 px-3 py-2 rounded border dark:border-gray-600 dark:bg-slate-800 font-mono" readonly>
                                    <button onclick="copyColor('rgb')" class="px-3 py-2 bg-indigo-600 text-white rounded">å¤åˆ¶</button>
                                </div>
                            </div>
                            <div>
                                <label class="text-sm font-medium">HSL</label>
                                <div class="flex gap-2">
                                    <input type="text" id="color-hsl" class="flex-1 px-3 py-2 rounded border dark:border-gray-600 dark:bg-slate-800 font-mono" readonly>
                                    <button onclick="copyColor('hsl')" class="px-3 py-2 bg-indigo-600 text-white rounded">å¤åˆ¶</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-4">é¢„è§ˆ</h3>
                        <div id="color-preview" class="w-full h-32 rounded-lg mb-4 flex items-center justify-center text-white font-bold shadow-lg" style="background: #6366f1;">
                            Sample Text
                        </div>
                        
                        <h3 class="font-bold mb-4 mt-6">è°ƒè‰²æ¿</h3>
                        <div class="grid grid-cols-5 gap-2">
                            ${['#6366f1', '#8b5cf6', '#d946ef', '#f43f5e', '#ef4444', '#f97316', '#eab308', '#22c55e', '#14b8a6', '#06b6d4', '#0ea5e9', '#3b82f6', '#6366f1', '#8b5cf6', '#a855f7']
                                .map(c => `<div onclick="setColor('${c}')" class="h-10 rounded cursor-pointer hover:scale-110 transition-transform" style="background: ${c}"></div>`).join('')}
                        </div>
                        
                        <h3 class="font-bold mb-4 mt-6">éšæœºé¢œè‰²</h3>
                        <button onclick="randomColor()" class="w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                            <i class="fas fa-random mr-2"></i>ç”Ÿæˆéšæœºé¢œè‰²
                        </button>
                    </div>
                </div>
            `;
        }
        
        function initColorPicker() {
            const colorInput = document.getElementById('color-input');
            if (colorInput) {
                colorInput.addEventListener('input', updateColorDisplay);
                updateColorDisplay();
            }
        }
        
        function updateColorDisplay() {
            const hex = document.getElementById('color-input').value;
            setColor(hex);
        }
        
        function setColor(hex) {
            document.getElementById('color-input').value = hex;
            document.getElementById('color-hex').value = hex.toUpperCase();
            
            // Convert to RGB
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            document.getElementById('color-rgb').value = `rgb(${r}, ${g}, ${b})`;
            
            // Convert to HSL
            const max = Math.max(r, g, b) / 255;
            const min = Math.min(r, g, b) / 255;
            const l = (max + min) / 2;
            let h = 0, s = 0;
            
            if (max !== min) {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                if (max === r / 255) h = ((g - b) / 255 / d + (g < b ? 6 : 0));
                else if (max === g / 255) h = ((b - r) / 255 / d + 2);
                else h = ((r - g) / 255 / d + 4);
                h *= 60;
            }
            
            document.getElementById('color-hsl').value = `hsl(${Math.round(h)}, ${Math.round(s * 100)}%, ${Math.round(l * 100)}%)`;
            
            // Update preview
            const preview = document.getElementById('color-preview');
            preview.style.background = hex;
            preview.style.color = (r * 0.299 + g * 0.587 + b * 0.114) > 186 ? '#000' : '#fff';
        }
        
        function randomColor() {
            const hex = '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');
            setColor(hex);
        }
        
        function copyColor(type) {
            const input = document.getElementById(`color-${type}`);
            navigator.clipboard.writeText(input.value).then(() => showToast('é¢œè‰²å€¼å·²å¤åˆ¶'));
        }
        
        // Weather
        function renderWeather() {
            return `
                <div class="glass rounded-2xl p-8 max-w-4xl mx-auto border border-gray-200 dark:border-gray-700">
                    <div class="flex gap-4 mb-6">
                        <input type="text" id="city-input" placeholder="è¾“å…¥åŸå¸‚åï¼ˆå¦‚ï¼šåŒ—äº¬ï¼‰" class="flex-1 px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800">
                        <button onclick="loadWeather()" class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                            <i class="fas fa-search"></i> æŸ¥è¯¢
                        </button>
                        <button onclick="loadWeatherByLocation()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            <i class="fas fa-location-arrow"></i>
                        </button>
                    </div>
                    
                    <div id="weather-result" class="hidden">
                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="text-center">
                                <div class="text-6xl mb-4" id="weather-icon">â˜€ï¸</div>
                                <div class="text-5xl font-bold text-indigo-600 dark:text-pink-400 mb-2" id="weather-temp">--Â°C</div>
                                <div class="text-xl text-gray-600 dark:text-gray-400" id="weather-desc">--</div>
                                <div class="text-sm text-gray-500 mt-2" id="weather-city">--</div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div class="glass rounded-xl p-4 text-center">
                                    <i class="fas fa-tint text-blue-500 text-2xl mb-2"></i>
                                    <div class="text-sm text-gray-500">æ¹¿åº¦</div>
                                    <div class="font-bold text-lg" id="weather-humidity">--%</div>
                                </div>
                                <div class="glass rounded-xl p-4 text-center">
                                    <i class="fas fa-wind text-gray-500 text-2xl mb-2"></i>
                                    <div class="text-sm text-gray-500">é£é€Ÿ</div>
                                    <div class="font-bold text-lg" id="weather-wind">-- m/s</div>
                                </div>
                                <div class="glass rounded-xl p-4 text-center">
                                    <i class="fas fa-eye text-purple-500 text-2xl mb-2"></i>
                                    <div class="text-sm text-gray-500">èƒ½è§åº¦</div>
                                    <div class="font-bold text-lg" id="weather-vis">-- km</div>
                                </div>
                                <div class="glass rounded-xl p-4 text-center">
                                    <i class="fas fa-compress-arrows-alt text-indigo-500 text-2xl mb-2"></i>
                                    <div class="text-sm text-gray-500">æ°”å‹</div>
                                    <div class="font-bold text-lg" id="weather-pressure">-- hPa</div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="font-bold mb-3">7å¤©é¢„æŠ¥</h4>
                                <div id="weather-forecast" class="space-y-2"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        async function loadWeather() {
            const city = document.getElementById('city-input').value || 'åŒ—äº¬';
            showToast('æ­£åœ¨è·å–å¤©æ°”æ•°æ®...');
            
            try {
                // Using Open-Meteo API (free, no API key needed)
                // First, geocode the city name to get coordinates
                const geoResponse = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`);
                const geoData = await geoResponse.json();
                
                if (!geoData.results || geoData.results.length === 0) {
                    showToast('æœªæ‰¾åˆ°è¯¥åŸå¸‚');
                    return;
                }
                
                const { latitude, longitude, name } = geoData.results[0];
                
                // Get weather data
                const weatherResponse = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,relative_humidity_2m,wind_speed_10m,visibility,surface_pressure&daily=temperature_2m_max,temperature_2m_min,weather_code&timezone=auto`
                );
                const weatherData = await weatherResponse.json();
                
                document.getElementById('weather-result').classList.remove('hidden');
                
                // Current weather
                const current = weatherData.current;
                document.getElementById('weather-temp').textContent = `${Math.round(current.temperature_2m)}Â°C`;
                document.getElementById('weather-humidity').textContent = `${current.relative_humidity_2m}%`;
                document.getElementById('weather-wind').textContent = `${current.wind_speed_10m} m/s`;
                document.getElementById('weather-vis').textContent = `${(current.visibility / 1000).toFixed(1)} km`;
                document.getElementById('weather-pressure').textContent = `${Math.round(current.surface_pressure)} hPa`;
                document.getElementById('weather-city').textContent = name;
                
                // Weather description and icon based on weather code
                const weatherCode = weatherData.daily.weather_code[0];
                const { icon, desc } = getWeatherInfo(weatherCode);
                document.getElementById('weather-icon').textContent = icon;
                document.getElementById('weather-desc').textContent = desc;
                
                // 7-day forecast
                const forecastContainer = document.getElementById('weather-forecast');
                forecastContainer.innerHTML = weatherData.daily.time.slice(0, 7).map((date, i) => {
                    const d = new Date(date);
                    const dayName = d.toLocaleDateString('zh-CN', { weekday: 'short' });
                    const { icon } = getWeatherInfo(weatherData.daily.weather_code[i]);
                    return `
                        <div class="flex items-center justify-between text-sm">
                            <span class="w-12">${dayName}</span>
                            <span class="text-xl">${icon}</span>
                            <span>${Math.round(weatherData.daily.temperature_2m_min[i])}Â° / ${Math.round(weatherData.daily.temperature_2m_max[i])}Â°</span>
                        </div>
                    `;
                }).join('');
                
                showToast('å¤©æ°”æ•°æ®å·²æ›´æ–°');
            } catch (e) {
                console.error(e);
                showToast('è·å–å¤©æ°”å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
            }
        }
        
        function loadWeatherByLocation() {
            if (!navigator.geolocation) {
                showToast('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒå®šä½');
                return;
            }
            
            showToast('æ­£åœ¨è·å–ä½ç½®...');
            navigator.geolocation.getCurrentPosition(async (position) => {
                const { latitude, longitude } = position.coords;
                
                try {
                    const weatherResponse = await fetch(
                        `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,relative_humidity_2m,wind_speed_10m,visibility,surface_pressure&daily=temperature_2m_max,temperature_2m_min,weather_code&timezone=auto`
                    );
                    const weatherData = await weatherResponse.json();
                    
                    document.getElementById('weather-result').classList.remove('hidden');
                    document.getElementById('city-input').value = 'å½“å‰ä½ç½®';
                    
                    const current = weatherData.current;
                    document.getElementById('weather-temp').textContent = `${Math.round(current.temperature_2m)}Â°C`;
                    document.getElementById('weather-humidity').textContent = `${current.relative_humidity_2m}%`;
                    document.getElementById('weather-wind').textContent = `${current.wind_speed_10m} m/s`;
                    document.getElementById('weather-vis').textContent = `${(current.visibility / 1000).toFixed(1)} km`;
                    document.getElementById('weather-pressure').textContent = `${Math.round(current.surface_pressure)} hPa`;
                    document.getElementById('weather-city').textContent = 'å½“å‰ä½ç½®';
                    
                    const weatherCode = weatherData.daily.weather_code[0];
                    const { icon, desc } = getWeatherInfo(weatherCode);
                    document.getElementById('weather-icon').textContent = icon;
                    document.getElementById('weather-desc').textContent = desc;
                    
                    showToast('å¤©æ°”æ•°æ®å·²æ›´æ–°');
                } catch (e) {
                    showToast('è·å–å¤©æ°”å¤±è´¥');
                }
            }, () => {
                showToast('æ— æ³•è·å–ä½ç½®');
            });
        }
        
        function getWeatherInfo(code) {
            const weatherMap = {
                0: { icon: 'â˜€ï¸', desc: 'æ™´' },
                1: { icon: 'ğŸŒ¤ï¸', desc: 'å¤§éƒ¨åˆ†æ™´' },
                2: { icon: 'â›…', desc: 'å¤šäº‘' },
                3: { icon: 'â˜ï¸', desc: 'é˜´' },
                45: { icon: 'ğŸŒ«ï¸', desc: 'é›¾' },
                48: { icon: 'ğŸŒ«ï¸', desc: 'é›¾' },
                51: { icon: 'ğŸŒ§ï¸', desc: 'å°é›¨' },
                61: { icon: 'ğŸŒ§ï¸', desc: 'é›¨' },
                63: { icon: 'ğŸŒ§ï¸', desc: 'ä¸­é›¨' },
                65: { icon: 'ğŸŒ§ï¸', desc: 'å¤§é›¨' },
                71: { icon: 'ğŸŒ¨ï¸', desc: 'é›ª' },
                95: { icon: 'â›ˆï¸', desc: 'é›·æš´' }
            };
            return weatherMap[code] || { icon: 'ğŸŒ¡ï¸', desc: 'æœªçŸ¥' };
        }
        
        // Tetris
        function renderTetris() {
            return `
                <div class="flex flex-col md:flex-row gap-8 justify-center items-start">
                    <div class="relative">
                        <canvas id="tetris" width="300" height="600" class="border-4 border-gray-800 dark:border-gray-600 rounded-lg bg-black"></canvas>
                        <div id="game-over" class="hidden absolute inset-0 bg-black bg-opacity-80 flex items-center justify-center rounded-lg">
                            <div class="text-center text-white">
                                <div class="text-2xl font-bold mb-4">æ¸¸æˆç»“æŸ</div>
                                <button onclick="initTetris()" class="px-4 py-2 bg-indigo-600 rounded hover:bg-indigo-700">é‡æ–°å¼€å§‹</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700 w-full md:w-48">
                        <div class="mb-6">
                            <div class="text-sm text-gray-500 mb-1">å¾—åˆ†</div>
                            <div class="text-3xl font-bold text-indigo-600 dark:text-pink-400" id="tetris-score">0</div>
                        </div>
                        <div class="mb-6">
                            <div class="text-sm text-gray-500 mb-1">æœ€é«˜åˆ†</div>
                            <div class="text-xl font-bold" id="tetris-high">0</div>
                        </div>
                        <div class="mb-6">
                            <div class="text-sm text-gray-500 mb-1">ä¸‹ä¸€ä¸ª</div>
                            <canvas id="next-piece" width="100" height="100" class="bg-gray-800 rounded"></canvas>
                        </div>
                        <div class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                            <div><i class="fas fa-arrow-left"></i> <i class="fas fa-arrow-right"></i> ç§»åŠ¨</div>
                            <div><i class="fas fa-arrow-up"></i> æ—‹è½¬</div>
                            <div><i class="fas fa-arrow-down"></i> åŠ é€Ÿ</div>
                            <div><i class="fas fa-space-shuttle"></i> ç©ºæ ¼æš‚åœ</div>
                        </div>
                        <button onclick="initTetris()" class="w-full mt-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                            æ–°æ¸¸æˆ
                        </button>
                    </div>
                </div>
            `;
        }
        
        let tetrisGame;
        
        function initTetris() {
            const canvas = document.getElementById('tetris');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const ROWS = 20;
            const COLS = 10;
            const BLOCK_SIZE = 30;
            
            let board = Array(ROWS).fill().map(() => Array(COLS).fill(0));
            let currentPiece = null;
            let nextPiece = null;
            let score = 0;
            let highScore = localStorage.getItem('tetris-high') || 0;
            let gameLoop;
            let gameOver = false;
            let paused = false;
            
            document.getElementById('tetris-high').textContent = highScore;
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('tetris-score').textContent = '0';
            
            const pieces = [
                [[1,1,1,1]], // I
                [[1,1],[1,1]], // O
                [[0,1,0],[1,1,1]], // T
                [[1,0,0],[1,1,1]], // L
                [[0,0,1],[1,1,1]], // J
                [[0,1,1],[1,1,0]], // S
                [[1,1,0],[0,1,1]]  // Z
            ];
            
            const colors = ['#00f0f0', '#f0f000', '#a000f0', '#f0a000', '#0000f0', '#00f000', '#f00000'];
            
            function newPiece() {
                const type = Math.floor(Math.random() * pieces.length);
                return {
                    shape: pieces[type],
                    color: colors[type],
                    x: Math.floor(COLS / 2) - Math.floor(pieces[type][0].length / 2),
                    y: 0
                };
            }
            
            function drawNextPiece() {
                const nextCanvas = document.getElementById('next-piece');
                if (!nextCanvas || !nextPiece) return;
                const nextCtx = nextCanvas.getContext('2d');
                nextCtx.fillStyle = '#1f2937';
                nextCtx.fillRect(0, 0, 100, 100);
                
                nextCtx.fillStyle = nextPiece.color;
                const offsetX = (100 - nextPiece.shape[0].length * 20) / 2;
                const offsetY = (100 - nextPiece.shape.length * 20) / 2;
                
                nextPiece.shape.forEach((row, y) => {
                    row.forEach((cell, x) => {
                        if (cell) {
                            nextCtx.fillRect(offsetX + x * 20, offsetY + y * 20, 18, 18);
                        }
                    });
                });
            }
            
            function draw() {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw grid
                ctx.strokeStyle = '#222';
                for (let r = 0; r < ROWS; r++) {
                    for (let c = 0; c < COLS; c++) {
                        ctx.strokeRect(c * BLOCK_SIZE, r * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
                    }
                }
                
                // Draw fixed blocks
                for (let r = 0; r < ROWS; r++) {
                    for (let c = 0; c < COLS; c++) {
                        if (board[r][c]) {
                            ctx.fillStyle = board[r][c];
                            ctx.fillRect(c * BLOCK_SIZE, r * BLOCK_SIZE, BLOCK_SIZE - 1, BLOCK_SIZE - 1);
                        }
                    }
                }
                
                // Draw current piece
                if (currentPiece) {
                    ctx.fillStyle = currentPiece.color;
                    currentPiece.shape.forEach((row, y) => {
                        row.forEach((cell, x) => {
                            if (cell) {
                                ctx.fillRect((currentPiece.x + x) * BLOCK_SIZE, (currentPiece.y + y) * BLOCK_SIZE, BLOCK_SIZE - 1, BLOCK_SIZE - 1);
                            }
                        });
                    });
                }
            }
            
            function collision() {
                return currentPiece.shape.some((row, y) => {
                    return row.some((cell, x) => {
                        if (!cell) return false;
                        const newX = currentPiece.x + x;
                        const newY = currentPiece.y + y;
                        return newX < 0 || newX >= COLS || newY >= ROWS || (newY >= 0 && board[newY][newX]);
                    });
                });
            }
            
            function merge() {
                currentPiece.shape.forEach((row, y) => {
                    row.forEach((cell, x) => {
                        if (cell) {
                            board[currentPiece.y + y][currentPiece.x + x] = currentPiece.color;
                        }
                    });
                });
            }
            
            function rotate() {
                const rotated = currentPiece.shape[0].map((_, i) => 
                    currentPiece.shape.map(row => row[i]).reverse()
                );
                const prevShape = currentPiece.shape;
                currentPiece.shape = rotated;
                if (collision()) currentPiece.shape = prevShape;
            }
            
            function clearLines() {
                let lines = 0;
                for (let r = ROWS - 1; r >= 0; r--) {
                    if (board[r].every(cell => cell !== 0)) {
                        board.splice(r, 1);
                        board.unshift(Array(COLS).fill(0));
                        lines++;
                        r++;
                    }
                }
                if (lines > 0) {
                    score += lines * 100 * lines;
                    document.getElementById('tetris-score').textContent = score;
                    if (score > highScore) {
                        highScore = score;
                        localStorage.setItem('tetris-high', highScore);
                        document.getElementById('tetris-high').textContent = highScore;
                    }
                }
            }
            
            function update() {
                if (gameOver || paused) return;
                
                currentPiece.y++;
                if (collision()) {
                    currentPiece.y--;
                    merge();
                    clearLines();
                    currentPiece = nextPiece;
                    nextPiece = newPiece();
                    drawNextPiece();
                    if (collision()) {
                        gameOver = true;
                        document.getElementById('game-over').classList.remove('hidden');
                        clearInterval(gameLoop);
                    }
                }
                draw();
            }
            
            document.onkeydown = (e) => {
                if (gameOver) return;
                if (e.key === 'ArrowLeft') { currentPiece.x--; if (collision()) currentPiece.x++; }
                if (e.key === 'ArrowRight') { currentPiece.x++; if (collision()) currentPiece.x--; }
                if (e.key === 'ArrowDown') update();
                if (e.key === 'ArrowUp') rotate();
                if (e.key === ' ') {
                    paused = !paused;
                    if (paused) {
                        clearInterval(gameLoop);
                    } else {
                        gameLoop = setInterval(update, 500);
                    }
                }
                draw();
            };
            
            currentPiece = newPiece();
            nextPiece = newPiece();
            drawNextPiece();
            
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(update, 500);
            draw();
        }
        
        // Hot Search
        function renderHotSearch() {
            return `
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-4 flex items-center text-red-500"><i class="fab fa-weibo mr-2"></i>å¾®åšçƒ­æœ</h3>
                        <ul id="weibo-list" class="space-y-3 text-sm">
                            <li class="animate-pulse bg-gray-200 h-8 rounded"></li>
                        </ul>
                    </div>
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-4 flex items-center text-blue-500"><i class="fab fa-zhihu mr-2"></i>çŸ¥ä¹çƒ­æ¦œ</h3>
                        <ul id="zhihu-list" class="space-y-3 text-sm">
                            <li class="animate-pulse bg-gray-200 h-8 rounded"></li>
                        </ul>
                    </div>
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-4 flex items-center text-gray-700 dark:text-gray-300"><i class="fas fa-search mr-2"></i>ç™¾åº¦çƒ­ç‚¹</h3>
                        <ul id="baidu-list" class="space-y-3 text-sm">
                            <li class="animate-pulse bg-gray-200 h-8 rounded"></li>
                        </ul>
                    </div>
                </div>
            `;
        }
        
        async function loadHotSearch() {
            // Using mock data since real APIs might have CORS issues
            setTimeout(() => {
                const weibo = ['æ˜¥èŠ‚æ”¾å‡å®‰æ’', 'æ–°å¹´ç¥ç¦è¯­', '2024æ˜¥æ™š', 'ç§‘æŠ€æ–°é—»', 'ç”µå½±æ¨è', 'ç¾é£Ÿæ¢åº—', 'æ—…æ¸¸æ”»ç•¥', 'å¥èº«è®¡åˆ’', 'è¯»ä¹¦æ‰“å¡', 'èŒåœºå¹²è´§'];
                const zhihu = ['å¦‚ä½•è¯„ä»·æ–°æŠ€æœ¯', '2024å¹´å±•æœ›', 'èŒåœºç»éªŒåˆ†äº«', 'å­¦ä¹ æ–¹æ³•æ¢è®¨', 'ç”Ÿæ´»æ„Ÿæ‚Ÿè®°å½•', 'ç§‘æŠ€è¶‹åŠ¿åˆ†æ'];
                const baidu = ['å¤©æ°”æŸ¥è¯¢', 'è‚¡ç¥¨è¡Œæƒ…', 'ç–«æƒ…åŠ¨æ€', 'ä½“è‚²èµ›äº‹', 'å¨±ä¹å…«å¦', 'ç¾é£Ÿæ¨è'];
                
                document.getElementById('weibo-list').innerHTML = weibo.map((item, i) => `
                    <li class="flex items-center hover:bg-gray-100 dark:hover:bg-slate-800 p-2 rounded cursor-pointer" onclick="searchItem('${item}')">
                        <span class="w-6 h-6 rounded ${i < 3 ? 'bg-red-500 text-white' : 'bg-gray-200 dark:bg-gray-700'} flex items-center justify-center text-xs mr-3">${i + 1}</span>
                        <span class="truncate">${item}</span>
                    </li>
                `).join('');
                
                document.getElementById('zhihu-list').innerHTML = zhihu.map((item, i) => `
                    <li class="flex items-center hover:bg-gray-100 dark:hover:bg-slate-800 p-2 rounded cursor-pointer" onclick="searchItem('${item}')">
                        <span class="w-6 h-6 rounded ${i < 3 ? 'bg-blue-500 text-white' : 'bg-gray-200 dark:bg-gray-700'} flex items-center justify-center text-xs mr-3">${i + 1}</span>
                        <span class="truncate">${item}</span>
                    </li>
                `).join('');
                
                document.getElementById('baidu-list').innerHTML = baidu.map((item, i) => `
                    <li class="flex items-center hover:bg-gray-100 dark:hover:bg-slate-800 p-2 rounded cursor-pointer" onclick="searchItem('${item}')">
                        <span class="w-6 h-6 rounded ${i < 3 ? 'bg-gray-800 text-white dark:bg-white dark:text-black' : 'bg-gray-200 dark:bg-gray-700'} flex items-center justify-center text-xs mr-3">${i + 1}</span>
                        <span class="truncate">${item}</span>
                    </li>
                `).join('');
            }, 500);
        }
        
        function searchItem(item) {
            window.open(`https://www.baidu.com/s?wd=${encodeURIComponent(item)}`, '_blank');
        }
        
        // Crypto Prices
        function renderCrypto() {
            return `
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6" id="crypto-grid">
                    ${['BTC', 'ETH', 'DOGE', 'ADA'].map(coin => `
                        <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700 text-center">
                            <div class="text-3xl mb-2">${coin === 'BTC' ? 'â‚¿' : coin === 'ETH' ? 'Î' : 'â—ˆ'}</div>
                            <h3 class="font-bold text-lg">${coin}</h3>
                            <div class="text-2xl font-bold text-indigo-600 dark:text-pink-400 mt-2" id="price-${coin}">$--</div>
                            <div class="text-sm mt-1" id="change-${coin}">--</div>
                        </div>
                    `).join('')}
                </div>
                <div class="mt-8 text-center text-sm text-gray-500">
                    æ•°æ®æ¥è‡ª CoinGecko APIï¼ˆæ¯60ç§’æ›´æ–°ï¼‰
                </div>
            `;
        }
        
        async function loadCrypto() {
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,dogecoin,cardano&vs_currencies=usd&include_24hr_change=true');
                const data = await response.json();
                
                const mapping = { 'BTC': 'bitcoin', 'ETH': 'ethereum', 'DOGE': 'dogecoin', 'ADA': 'cardano' };
                
                Object.keys(mapping).forEach(coin => {
                    const info = data[mapping[coin]];
                    if (info) {
                        document.getElementById(`price-${coin}`).textContent = `$${info.usd.toLocaleString()}`;
                        const change = info.usd_24h_change;
                        const changeEl = document.getElementById(`change-${coin}`);
                        changeEl.textContent = `${change > 0 ? '+' : ''}${change.toFixed(2)}%`;
                        changeEl.className = `text-sm mt-1 ${change > 0 ? 'text-green-500' : 'text-red-500'}`;
                    }
                });
            } catch (e) {
                console.log('APIé™åˆ¶ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®');
                ['BTC', 'ETH', 'DOGE', 'ADA'].forEach(coin => {
                    document.getElementById(`price-${coin}`).textContent = `$${(Math.random() * 50000 + 1).toFixed(2)}`;
                    document.getElementById(`change-${coin}`).textContent = `${(Math.random() * 10 - 5).toFixed(2)}%`;
                });
            }
        }
        
        // Device Info
        function renderDeviceInfo() {
            const ua = navigator.userAgent;
            const isMobile = /Mobile|Android|iPhone/i.test(ua);
            const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const isOnline = navigator.onLine;
            
            return `
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-4 flex items-center"><i class="fas fa-desktop mr-2 text-blue-500"></i>ç¡¬ä»¶ä¿¡æ¯</h3>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">å±å¹•åˆ†è¾¨ç‡</span>
                                <span class="font-mono">${window.screen.width} Ã— ${window.screen.height}</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">å¯ç”¨åˆ†è¾¨ç‡</span>
                                <span class="font-mono">${window.screen.availWidth} Ã— ${window.screen.availHeight}</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">è‰²å½©æ·±åº¦</span>
                                <span class="font-mono">${window.screen.colorDepth}-bit</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">è®¾å¤‡ç±»å‹</span>
                                <span class="font-mono">${isMobile ? 'ğŸ“± ç§»åŠ¨ç«¯' : 'ğŸ’» æ¡Œé¢ç«¯'}</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">è®¾å¤‡åƒç´ æ¯”</span>
                                <span class="font-mono">${window.devicePixelRatio}x</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">CPU æ ¸å¿ƒ</span>
                                <span class="font-mono">${navigator.hardwareConcurrency || 'æœªçŸ¥'}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-bold mb-4 flex items-center"><i class="fab fa-chrome mr-2 text-green-500"></i>æµè§ˆå™¨ä¿¡æ¯</h3>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">æµè§ˆå™¨</span>
                                <span class="font-mono">${navigator.appName}</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">è¯­è¨€</span>
                                <span class="font-mono">${navigator.language}</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">åœ¨çº¿çŠ¶æ€</span>
                                <span class="font-mono">${isOnline ? 'ğŸŸ¢ åœ¨çº¿' : 'ğŸ”´ ç¦»çº¿'}</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">ç³»ç»Ÿä¸»é¢˜</span>
                                <span class="font-mono">${isDark ? 'ğŸŒ™ æ·±è‰²' : 'â˜€ï¸ æµ…è‰²'}</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">Cookies</span>
                                <span class="font-mono">${navigator.cookieEnabled ? 'âœ… å¯ç”¨' : 'âŒ ç¦ç”¨'}</span>
                            </div>
                            <div class="flex justify-between border-b dark:border-gray-700 pb-2">
                                <span class="text-gray-500">æœ¬åœ°å­˜å‚¨</span>
                                <span class="font-mono">${typeof Storage !== 'undefined' ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ'}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700 md:col-span-2">
                        <h3 class="font-bold mb-4 flex items-center"><i class="fas fa-fingerprint mr-2 text-purple-500"></i>User Agent</h3>
                        <div class="bg-gray-100 dark:bg-slate-800 p-4 rounded-lg text-xs font-mono break-all">
                            ${ua}
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Password Generator
        function renderPasswordGenerator() {
            return `
                <div class="glass rounded-2xl p-8 max-w-2xl mx-auto border border-gray-200 dark:border-gray-700">
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-sm font-medium">å¯†ç é•¿åº¦: <span id="pwd-len-val" class="text-indigo-600 dark:text-pink-400 font-bold">16</span></label>
                            <button onclick="copyPassword()" class="text-sm text-indigo-600 dark:text-pink-400 hover:underline">
                                <i class="fas fa-copy"></i> å¤åˆ¶
                            </button>
                        </div>
                        <input type="range" id="pwd-length" min="8" max="64" value="16" class="w-full" oninput="updatePwdLength()">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" id="pwd-upper" checked class="rounded text-indigo-600">
                            <span>å¤§å†™å­—æ¯ (A-Z)</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" id="pwd-lower" checked class="rounded text-indigo-600">
                            <span>å°å†™å­—æ¯</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" id="pwd-number" checked class="rounded text-indigo-600">
                            <span>æ•°å­— (0-9)</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" id="pwd-symbol" checked class="rounded text-indigo-600">
                            <span>ç‰¹æ®Šç¬¦å· (!@#$)</span>
                        </label>
                    </div>
                    
                    <button onclick="generatePassword()" class="w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors mb-6">
                        <i class="fas fa-key mr-2"></i>ç”Ÿæˆå¯†ç 
                    </button>
                    
                    <div class="relative">
                        <input type="text" id="pwd-result" readonly class="w-full px-4 py-3 text-center text-xl font-mono bg-gray-100 dark:bg-slate-800 rounded-lg border-2 border-transparent focus:border-indigo-500 outline-none">
                        <div id="pwd-strength" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-xs px-2 py-1 rounded"></div>
                    </div>
                    
                    <div class="mt-6 space-y-2" id="pwd-history">
                        <div class="text-sm text-gray-500">å†å²è®°å½•</div>
                    </div>
                </div>
            `;
        }
        
        function updatePwdLength() {
            document.getElementById('pwd-len-val').textContent = document.getElementById('pwd-length').value;
        }
        
        function generatePassword() {
            const length = parseInt(document.getElementById('pwd-length').value);
            const useUpper = document.getElementById('pwd-upper').checked;
            const useLower = document.getElementById('pwd-lower').checked;
            const useNumber = document.getElementById('pwd-number').checked;
            const useSymbol = document.getElementById('pwd-symbol').checked;
            
            let chars = '';
            if (useUpper) chars += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            if (useLower) chars += 'abcdefghijklmnopqrstuvwxyz';
            if (useNumber) chars += '0123456789';
            if (useSymbol) chars += '!@#$%^&*()_+-=[]{}|;:,.<>?';
            
            if (!chars) {
                showToast('è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦ç±»å‹');
                return;
            }
            
            let password = '';
            for (let i = 0; i < length; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            document.getElementById('pwd-result').value = password;
            
            // Calculate strength
            let strength = 0;
            if (useUpper) strength++;
            if (useLower) strength++;
            if (useNumber) strength++;
            if (useSymbol) strength++;
            if (length >= 12) strength++;
            if (length >= 16) strength++;
            
            const strengthEl = document.getElementById('pwd-strength');
            const strengths = ['å¼±', 'ä¸­ç­‰', 'å¼º', 'æå¼º'];
            const colors = ['bg-red-500', 'bg-yellow-500', 'bg-green-500', 'bg-indigo-500'];
            const idx = Math.min(Math.floor(strength / 1.5), 3);
            strengthEl.textContent = strengths[idx];
            strengthEl.className = `absolute right-2 top-1/2 transform -translate-y-1/2 text-xs px-2 py-1 rounded text-white ${colors[idx]}`;
            
            // Add to history
            const history = document.getElementById('pwd-history');
            const item = document.createElement('div');
            item.className = 'flex justify-between items-center text-sm font-mono bg-gray-50 dark:bg-slate-800 p-2 rounded';
            item.innerHTML = `<span class="truncate mr-2">${password}</span><span class="text-xs text-gray-400">${new Date().toLocaleTimeString()}</span>`;
            history.insertBefore(item, history.children[1]);
            if (history.children.length > 6) history.removeChild(history.lastChild);
        }
        
        function copyPassword() {
            const pwd = document.getElementById('pwd-result').value;
            if (pwd) {
                navigator.clipboard.writeText(pwd).then(() => showToast('å¯†ç å·²å¤åˆ¶'));
            }
        }
        
        // Text Stats
        function renderTextStats() {
            return `
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="md:col-span-2">
                        <textarea id="stats-input" class="w-full h-96 p-4 rounded-lg border dark:border-gray-600 dark:bg-slate-800" placeholder="ç²˜è´´æ–‡æœ¬..." oninput="updateTextStats()"></textarea>
                    </div>
                    <div class="space-y-4">
                        <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-gray-500">å­—ç¬¦æ•°ï¼ˆå«ç©ºæ ¼ï¼‰</div>
                            <div class="text-2xl font-bold text-indigo-600 dark:text-pink-400" id="stat-chars">0</div>
                        </div>
                        <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-gray-500">å­—ç¬¦æ•°ï¼ˆä¸å«ç©ºæ ¼ï¼‰</div>
                            <div class="text-2xl font-bold" id="stat-chars-no-space">0</div>
                        </div>
                        <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-gray-500">å•è¯æ•° / è¯æ•°</div>
                            <div class="text-2xl font-bold" id="stat-words">0</div>
                        </div>
                        <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-gray-500">è¡Œæ•°</div>
                            <div class="text-2xl font-bold" id="stat-lines">0</div>
                        </div>
                        <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-gray-500">æ®µè½æ•°</div>
                            <div class="text-2xl font-bold" id="stat-paragraphs">0</div>
                        </div>
                        <div class="glass rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-gray-500">é˜…è¯»æ—¶é—´</div>
                            <div class="text-2xl font-bold" id="stat-reading-time">0 åˆ†é’Ÿ</div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function updateTextStats() {
            const text = document.getElementById('stats-input').value;
            document.getElementById('stat-chars').textContent = text.length;
            document.getElementById('stat-chars-no-space').textContent = text.replace(/\s/g, '').length;
            document.getElementById('stat-words').textContent = text.trim() ? text.trim().split(/\s+/).length : 0;
            document.getElementById('stat-lines').textContent = text.split('\n').length;
            document.getElementById('stat-paragraphs').textContent = text.split(/\n\s*\n/).filter(p => p.trim()).length;
            
            // Average reading speed: 200-250 words per minute
            const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
            const readingTime = Math.ceil(wordCount / 200);
            document.getElementById('stat-reading-time').textContent = `${readingTime} åˆ†é’Ÿ`;
        }
        
        // Exchange Rate
        function renderExchange() {
            return `
                <div class="glass rounded-2xl p-8 max-w-2xl mx-auto border border-gray-200 dark:border-gray-700">
                    <div class="flex items-center gap-4 mb-6">
                        <input type="number" id="exchange-amount" value="100" class="flex-1 px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800 text-xl" oninput="calculateExchange()">
                        <select id="exchange-from" class="px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800" onchange="calculateExchange()">
                            <option value="CNY">ğŸ‡¨ğŸ‡³ CNY</option>
                            <option value="USD" selected>ğŸ‡ºğŸ‡¸ USD</option>
                            <option value="EUR">ğŸ‡ªğŸ‡º EUR</option>
                            <option value="JPY">ğŸ‡¯ğŸ‡µ JPY</option>
                            <option value="GBP">ğŸ‡¬ğŸ‡§ GBP</option>
                            <option value="KRW">ğŸ‡°ğŸ‡· KRW</option>
                            <option value="HKD">ğŸ‡­ğŸ‡° HKD</option>
                        </select>
                    </div>
                    
                    <div class="flex justify-center mb-6">
                        <button onclick="swapCurrency()" class="p-3 rounded-full bg-gray-100 dark:bg-slate-800 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors">
                            <i class="fas fa-exchange-alt text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="flex items-center gap-4 mb-6">
                        <input type="text" id="exchange-result" readonly class="flex-1 px-4 py-3 rounded-lg bg-gray-100 dark:bg-slate-800 text-xl font-bold text-indigo-600 dark:text-pink-400">
                        <select id="exchange-to" class="px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800" onchange="calculateExchange()">
                            <option value="CNY" selected>ğŸ‡¨ğŸ‡³ CNY</option>
                            <option value="USD">ğŸ‡ºğŸ‡¸ USD</option>
                            <option value="EUR">ğŸ‡ªğŸ‡º EUR</option>
                            <option value="JPY">ğŸ‡¯ğŸ‡µ JPY</option>
                            <option value="GBP">ğŸ‡¬ğŸ‡§ GBP</option>
                            <option value="KRW">ğŸ‡°ğŸ‡· KRW</option>
                            <option value="HKD">ğŸ‡­ğŸ‡° HKD</option>
                        </select>
                    </div>
                    
                    <div class="text-center text-sm text-gray-500">
                        æ±‡ç‡æ•°æ®ä»…ä¾›å‚è€ƒï¼Œå®é™…ä»¥é“¶è¡Œæ±‡ç‡ä¸ºå‡†
                    </div>
                </div>
            `;
        }
        
        const rates = { 
            USD: 1, 
            CNY: 7.24, 
            EUR: 0.92, 
            JPY: 149.5, 
            GBP: 0.79, 
            KRW: 1320, 
            HKD: 7.82 
        };
        
        function calculateExchange() {
            const amount = parseFloat(document.getElementById('exchange-amount').value) || 0;
            const from = document.getElementById('exchange-from').value;
            const to = document.getElementById('exchange-to').value;
            
            const result = (amount / rates[from] * rates[to]).toFixed(2);
            document.getElementById('exchange-result').value = result;
        }
        
        function swapCurrency() {
            const from = document.getElementById('exchange-from');
            const to = document.getElementById('exchange-to');
            const temp = from.value;
            from.value = to.value;
            to.value = temp;
            calculateExchange();
        }
        
        // BMI Calculator
        function renderBMI() {
            return `
                <div class="glass rounded-2xl p-8 max-w-2xl mx-auto border border-gray-200 dark:border-gray-700">
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">èº«é«˜</label>
                            <input type="number" id="bmi-height" placeholder="175" class="w-full px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800" oninput="calculateBMI()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">ä½“é‡</label>
                            <input type="number" id="bmi-weight" placeholder="70" class="w-full px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800" oninput="calculateBMI()">
                        </div>
                    </div>
                    
                    <div id="bmi-result" class="hidden text-center py-8">
                        <div class="text-5xl font-bold mb-2" id="bmi-value">--</div>
                        <div class="text-xl mb-4" id="bmi-category">--</div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-2 overflow-hidden">
                            <div id="bmi-bar" class="h-full transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between text-xs text-gray-500 mt-2">
                            <span>åç˜¦</span>
                            <span>æ­£å¸¸</span>
                            <span>åèƒ–</span>
                            <span>è‚¥èƒ–</span>
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg text-sm text-blue-800 dark:text-blue-200">
                        <i class="fas fa-info-circle mr-1"></i>
                        BMI = ä½“é‡ / èº«é«˜Â²(mÂ²)ã€‚æ­£å¸¸èŒƒå›´ï¼š18.5 - 23.9
                    </div>
                </div>
            `;
        }
        
        function calculateBMI() {
            const h = parseFloat(document.getElementById('bmi-height').value) / 100;
            const w = parseFloat(document.getElementById('bmi-weight').value);
            
            if (!h || !w) return;
            
            const bmi = (w / (h * h)).toFixed(1);
            const resultDiv = document.getElementById('bmi-result');
            resultDiv.classList.remove('hidden');
            
            document.getElementById('bmi-value').textContent = bmi;
            
            let category, color, width;
            if (bmi < 18.5) {
                category = 'åç˜¦';
                color = 'bg-blue-500';
                width = '25%';
            } else if (bmi < 24) {
                category = 'æ­£å¸¸';
                color = 'bg-green-500';
                width = '50%';
            } else if (bmi < 28) {
                category = 'åèƒ–';
                color = 'bg-yellow-500';
                width = '75%';
            } else {
                category = 'è‚¥èƒ–';
                color = 'bg-red-500';
                width = '100%';
            }
            
            document.getElementById('bmi-category').textContent = category;
            document.getElementById('bmi-category').className = `text-xl mb-4 font-bold ${color.replace('bg-', 'text-')}`;
            const bar = document.getElementById('bmi-bar');
            bar.className = `h-full transition-all duration-500 ${color}`;
            bar.style.width = width;
        }
        
        // GitHub Stats
        function renderGitHubStats() {
            return `
                <div class="glass rounded-2xl p-8 max-w-2xl mx-auto border border-gray-200 dark:border-gray-700">
                    <div class="flex gap-4 mb-6">
                        <input type="text" id="github-username" placeholder="è¾“å…¥GitHubç”¨æˆ·å" class="flex-1 px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800">
                        <button onclick="fetchGitHubStats()" class="px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-900">
                            <i class="fab fa-github"></i> æŸ¥è¯¢
                        </button>
                    </div>
                    <div id="github-result" class="hidden">
                        <div class="flex items-center gap-4 mb-6">
                            <img id="github-avatar" src="" class="w-20 h-20 rounded-full border-4 border-gray-200 dark:border-gray-700">
                            <div>
                                <h3 id="github-name" class="text-xl font-bold"></h3>
                                <p id="github-bio" class="text-gray-600 dark:text-gray-400 text-sm"></p>
                                <p id="github-location" class="text-gray-500 text-sm mt-1"></p>
                            </div>
                        </div>
                        <div class="grid grid-cols-4 gap-4 text-center">
                            <div class="glass rounded-lg p-4">
                                <div class="text-2xl font-bold text-indigo-600 dark:text-pink-400" id="github-repos">0</div>
                                <div class="text-sm text-gray-500">ä»“åº“</div>
                            </div>
                            <div class="glass rounded-lg p-4">
                                <div class="text-2xl font-bold text-indigo-600 dark:text-pink-400" id="github-followers">0</div>
                                <div class="text-sm text-gray-500">ç²‰ä¸</div>
                            </div>
                            <div class="glass rounded-lg p-4">
                                <div class="text-2xl font-bold text-indigo-600 dark:text-pink-400" id="github-following">0</div>
                                <div class="text-sm text-gray-500">å…³æ³¨</div>
                            </div>
                            <div class="glass rounded-lg p-4">
                                <div class="text-2xl font-bold text-indigo-600 dark:text-pink-400" id="github-gists">0</div>
                                <div class="text-sm text-gray-500">Gists</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        async function fetchGitHubStats() {
            const username = document.getElementById('github-username').value;
            if (!username) {
                showToast('è¯·è¾“å…¥ç”¨æˆ·å');
                return;
            }
            
            showToast('æ­£åœ¨æŸ¥è¯¢...');
            
            try {
                const response = await fetch(`https://api.github.com/users/${username}`);
                const data = await response.json();
                
                if (data.message === 'Not Found') {
                    showToast('ç”¨æˆ·ä¸å­˜åœ¨');
                    return;
                }
                
                document.getElementById('github-result').classList.remove('hidden');
                document.getElementById('github-avatar').src = data.avatar_url;
                document.getElementById('github-name').textContent = data.name || data.login;
                document.getElementById('github-bio').textContent = data.bio || 'æš‚æ— ç®€ä»‹';
                document.getElementById('github-location').textContent = data.location ? `ğŸ“ ${data.location}` : '';
                document.getElementById('github-repos').textContent = data.public_repos;
                document.getElementById('github-followers').textContent = data.followers;
                document.getElementById('github-following').textContent = data.following;
                document.getElementById('github-gists').textContent = data.public_gists;
                
                showToast('æŸ¥è¯¢æˆåŠŸ');
            } catch (e) {
                showToast('è·å–å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
            }
        }
        
        // Fortune
        function renderFortune() {
            const signs = ['ç™½ç¾Šåº§', 'é‡‘ç‰›åº§', 'åŒå­åº§', 'å·¨èŸ¹åº§', 'ç‹®å­åº§', 'å¤„å¥³åº§', 'å¤©ç§¤åº§', 'å¤©èåº§', 'å°„æ‰‹åº§', 'æ‘©ç¾¯åº§', 'æ°´ç“¶åº§', 'åŒé±¼åº§'];
            return `
                <div class="glass rounded-2xl p-8 max-w-2xl mx-auto border border-gray-200 dark:border-gray-700">
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">é€‰æ‹©æ˜Ÿåº§</label>
                        <select id="zodiac-sign" class="w-full px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800" onchange="generateFortune()">
                            <option value="">è¯·é€‰æ‹©...</option>
                            ${signs.map(s => `<option value="${s}">${s}</option>`).join('')}
                        </select>
                    </div>
                    <button onclick="generateFortune()" class="w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 mb-6">
                        <i class="fas fa-magic mr-2"></i>æŸ¥çœ‹è¿åŠ¿
                    </button>
                    <div id="fortune-result" class="hidden space-y-4">
                        <div class="flex justify-between items-center p-4 bg-red-50 dark:bg-red-900 rounded-lg">
                            <span class="font-bold">ç»¼åˆè¿åŠ¿</span>
                            <div class="flex text-yellow-500" id="fortune-stars"></div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 bg-blue-50 dark:bg-blue-900 rounded-lg">
                                <div class="text-sm text-gray-600 dark:text-gray-400">å¹¸è¿è‰²</div>
                                <div class="font-bold text-lg" id="fortune-color"></div>
                            </div>
                            <div class="p-4 bg-green-50 dark:bg-green-900 rounded-lg">
                                <div class="text-sm text-gray-600 dark:text-gray-400">å¹¸è¿æ•°å­—</div>
                                <div class="font-bold text-lg" id="fortune-number"></div>
                            </div>
                        </div>
                        <div class="p-4 bg-purple-50 dark:bg-purple-900 rounded-lg">
                            <div class="text-sm text-gray-600 dark:text-gray-400 mb-1">ä»Šæ—¥å»ºè®®</div>
                            <div id="fortune-advice"></div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function generateFortune() {
            const sign = document.getElementById('zodiac-sign').value;
            if (!sign) {
                showToast('è¯·é€‰æ‹©æ˜Ÿåº§');
                return;
            }
            
            const colors = ['çº¢è‰²', 'è“è‰²', 'ç»¿è‰²', 'é»„è‰²', 'ç´«è‰²', 'ç²‰è‰²', 'ç™½è‰²', 'é»‘è‰²', 'æ©™è‰²', 'é’è‰²'];
            const advices = [
                'ä»Šå¤©é€‚åˆå‡ºé—¨æ•£æ­¥ï¼Œå‘¼å¸æ–°é²œç©ºæ°”ï¼Œæ”¾æ¾èº«å¿ƒã€‚',
                'å·¥ä½œæ•ˆç‡å¾ˆé«˜ï¼Œé€‚åˆå¤„ç†å¤æ‚ä»»åŠ¡ï¼Œå¯ä»¥å°è¯•æ–°æ–¹æ³•ã€‚',
                'å¯èƒ½ä¼šé‡åˆ°è´µäººï¼Œä¿æŒå¾®ç¬‘ï¼Œç§¯æä¸äººæ²Ÿé€šã€‚',
                'æ³¨æ„èº«ä½“å¥åº·ï¼Œå¤šå–æ°´ï¼Œé€‚å½“è¿åŠ¨ã€‚',
                'è´¢è¿ä¸é”™ï¼Œå¯ä»¥è€ƒè™‘å°é¢æŠ•èµ„ï¼Œä½†ä¸è¦å†²åŠ¨æ¶ˆè´¹ã€‚',
                'é€‚åˆä¸æœ‹å‹èšä¼šï¼Œå¢è¿›æ„Ÿæƒ…ï¼Œåˆ†äº«å¿«ä¹ã€‚',
                'å­¦ä¹ è¿åŠ¿ä½³ï¼Œé€‚åˆé˜…è¯»ã€å­¦ä¹ æ–°æŠ€èƒ½ã€‚',
                'æ„Ÿæƒ…è¿åŠ¿ä¸Šå‡ï¼Œå•èº«è€…å¯ä¸»åŠ¨å‡ºå‡»ã€‚'
            ];
            
            const stars = Math.floor(Math.random() * 3) + 3; // 3-5 stars
            document.getElementById('fortune-result').classList.remove('hidden');
            document.getElementById('fortune-stars').innerHTML = '<i class="fas fa-star"></i>'.repeat(stars) + '<i class="far fa-star"></i>'.repeat(5 - stars);
            document.getElementById('fortune-color').textContent = colors[Math.floor(Math.random() * colors.length)];
            document.getElementById('fortune-number').textContent = Math.floor(Math.random() * 99) + 1;
            document.getElementById('fortune-advice').textContent = advices[Math.floor(Math.random() * advices.length)];
        }
        
        // World Clock
        function renderWorldClock() {
            return `
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="world-clocks">
                    ${['åŒ—äº¬', 'çº½çº¦', 'ä¼¦æ•¦', 'ä¸œäº¬', 'æ‚‰å°¼', 'å·´é»', 'è¿ªæ‹œ', 'æ–°åŠ å¡', 'è«æ–¯ç§‘'].map((city, idx) => `
                        <div class="glass rounded-2xl p-6 text-center border border-gray-200 dark:border-gray-700">
                            <h3 class="text-xl font-bold mb-2">${city}</h3>
                            <div class="text-3xl font-mono font-bold text-indigo-600 dark:text-pink-400" id="clock-${idx}">--:--:--</div>
                            <div class="text-sm text-gray-500 mt-2" id="date-${idx}">--</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        function initWorldClock() {
            const offsets = [8, -5, 0, 9, 11, 1, 4, 8, 3]; // UTC offsets
            
            function update() {
                offsets.forEach((offset, idx) => {
                    const now = new Date();
                    const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
                    const cityTime = new Date(utc + (3600000 * offset));
                    
                    const timeEl = document.getElementById(`clock-${idx}`);
                    const dateEl = document.getElementById(`date-${idx}`);
                    if (timeEl) {
                        timeEl.textContent = cityTime.toLocaleTimeString('zh-CN', { hour12: false });
                        dateEl.textContent = cityTime.toLocaleDateString('zh-CN');
                    }
                });
            }
            
            update();
            setInterval(update, 1000);
        }
        
        // Countdown Timer
        function renderCountdown() {
            return `
                <div class="glass rounded-2xl p-8 max-w-2xl mx-auto border border-gray-200 dark:border-gray-700">
                    <div class="flex flex-col md:flex-row gap-4 mb-8">
                        <input type="datetime-local" id="target-time" class="flex-1 px-4 py-3 rounded-lg border dark:border-gray-600 dark:bg-slate-800">
                        <button onclick="startCountdown()" class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                            å¼€å§‹å€’è®¡æ—¶
                        </button>
                    </div>
                    <div id="countdown-display" class="text-center">
                        <div class="grid grid-cols-4 gap-4">
                            <div class="glass rounded-xl p-4">
                                <div class="text-4xl font-bold text-indigo-600 dark:text-pink-400" id="cd-days">00</div>
                                <div class="text-sm text-gray-500">å¤©</div>
                            </div>
                            <div class="glass rounded-xl p-4">
                                <div class="text-4xl font-bold text-indigo-600 dark:text-pink-400" id="cd-hours">00</div>
                                <div class="text-sm text-gray-500">æ—¶</div>
                            </div>
                            <div class="glass rounded-xl p-4">
                                <div class="text-4xl font-bold text-indigo-600 dark:text-pink-400" id="cd-minutes">00</div>
                                <div class="text-sm text-gray-500">åˆ†</div>
                            </div>
                            <div class="glass rounded-xl p-4">
                                <div class="text-4xl font-bold text-indigo-600 dark:text-pink-400" id="cd-seconds">00</div>
                                <div class="text-sm text-gray-500">ç§’</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        let countdownInterval;
        
        function startCountdown() {
            const target = new Date(document.getElementById('target-time').value);
            if (isNaN(target)) {
                showToast('è¯·é€‰æ‹©æœ‰æ•ˆæ—¶é—´');
                return;
            }
            
            clearInterval(countdownInterval);
            
            countdownInterval = setInterval(() => {
                const now = new Date();
                const diff = target - now;
                
                if (diff <= 0) {
                    clearInterval(countdownInterval);
                    document.getElementById('cd-days').textContent = '00';
                    document.getElementById('cd-hours').textContent = '00';
                    document.getElementById('cd-minutes').textContent = '00';
                    document.getElementById('cd-seconds').textContent = '00';
                    showToast('å€’è®¡æ—¶ç»“æŸï¼');
                    return;
                }
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('cd-days').textContent = String(days).padStart(2, '0');
                document.getElementById('cd-hours').textContent = String(hours).padStart(2, '0');
                document.getElementById('cd-minutes').textContent = String(minutes).padStart(2, '0');
                document.getElementById('cd-seconds').textContent = String(seconds).padStart(2, '0');
            }, 1000);
        }
        
        // Stopwatch
        function renderStopwatch() {
            return `
                <div class="glass rounded-2xl p-8 max-w-2xl mx-auto border border-gray-200 dark:border-gray-700 text-center">
                    <div class="text-6xl font-mono font-bold mb-8 text-indigo-600 dark:text-pink-400" id="stopwatch-display">00:00:00</div>
                    <div class="flex justify-center gap-4 mb-8 flex-wrap">
                        <button onclick="startStopwatch()" class="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600">
                            <i class="fas fa-play mr-1"></i> å¼€å§‹
                        </button>
                        <button onclick="pauseStopwatch()" class="px-6 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600">
                            <i class="fas fa-pause mr-1"></i> æš‚åœ
                        </button>
                        <button onclick="resetStopwatch()" class="px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600">
                            <i class="fas fa-redo mr-1"></i> é‡ç½®
                        </button>
                        <button onclick="lapStopwatch()" class="px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                            <i class="fas fa-flag mr-1"></i> è®¡æ¬¡
                        </button>
                    </div>
                    <div id="laps" class="max-h-60 overflow-y-auto space-y-2"></div>
                </div>
            `;
        }
        
        let stopwatchInterval;
        let stopwatchTime = 0;
        let stopwatchRunning = false;
        
        function startStopwatch() {
            if (stopwatchRunning) return;
            stopwatchRunning = true;
            const startTime = Date.now() - stopwatchTime;
            stopwatchInterval = setInterval(() => {
                stopwatchTime = Date.now() - startTime;
                updateStopwatchDisplay();
            }, 10);
        }
        
        function pauseStopwatch() {
            stopwatchRunning = false;
            clearInterval(stopwatchInterval);
        }
        
        function resetStopwatch() {
            stopwatchRunning = false;
            clearInterval(stopwatchInterval);
            stopwatchTime = 0;
            updateStopwatchDisplay();
            document.getElementById('laps').innerHTML = '';
        }
        
        function lapStopwatch() {
            if (!stopwatchRunning) return;
            const lapTime = formatTime(stopwatchTime);
            const lapsDiv = document.getElementById('laps');
            const lapDiv = document.createElement('div');
            lapDiv.className = 'glass rounded-lg p-3 flex justify-between items-center';
            lapDiv.innerHTML = `<span>è®¡æ¬¡ ${lapsDiv.children.length + 1}</span><span class="font-mono font-bold">${lapTime}</span>`;
            lapsDiv.insertBefore(lapDiv, lapsDiv.firstChild);
        }
        
        function updateStopwatchDisplay() {
            document.getElementById('stopwatch-display').textContent = formatTime(stopwatchTime);
        }
        
        function formatTime(ms) {
            const minutes = Math.floor(ms / 60000);
            const seconds = Math.floor((ms % 60000) / 1000);
            const centiseconds = Math.floor((ms % 1000) / 10);
            return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}:${String(centiseconds).padStart(2, '0')}`;
        }
        
        // Code Playground
        function renderCodePlayground() {
            return `
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <div class="flex gap-2 mb-2">
                            <button onclick="setCodeTemplate('html')" class="px-3 py-1 bg-orange-500 text-white rounded text-sm">HTML</button>
                            <button onclick="setCodeTemplate('css')" class="px-3 py-1 bg-blue-500 text-white rounded text-sm">CSS</button>
                            <button onclick="setCodeTemplate('js')" class="px-3 py-1 bg-yellow-500 text-white rounded text-sm">JS</button>
                        </div>
                        <textarea id="code-input" class="w-full h-80 p-4 rounded-lg border dark:border-gray-600 dark:bg-slate-800 font-mono text-sm" placeholder="ç¼–å†™ä»£ç ..." oninput="updateCodePreview()"></textarea>
                    </div>
                    <div class="glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="font-bold">é¢„è§ˆ</h3>
                            <button onclick="runCode()" class="px-4 py-1 bg-green-500 text-white rounded text-sm">è¿è¡Œ</button>
                        </div>
                        <iframe id="code-preview" class="w-full h-80 rounded-lg border dark:border-gray-600 bg-white"></iframe>
                    </div>
                </div>
            `;
        }
        
        function setCodeTemplate(type) {
            const templates = {
                html: `<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: system-ui; padding: 20px; }
        h1 { color: #6366f1; }
    </style>
</head>
<body>
    <h1>Hello World!</h1>
    <p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡µé¢</p>
    <button onclick="alert('ç‚¹å‡»äº†!')">ç‚¹å‡»æˆ‘</button>
</body>
</html>`,
                css: `<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: system-ui;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
        }
        .card {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>CSS ç¤ºä¾‹</h1>
        <p>è¿™æ˜¯ä¸€ä¸ªå¡ç‰‡ç»„ä»¶</p>
    </div>
